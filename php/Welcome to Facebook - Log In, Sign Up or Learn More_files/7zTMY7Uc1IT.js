/*!CK:4284736437!*//*1412568397,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Li5ab"]); }

__d("AdsAMAudienceActions",["AdsAMDispatcher","AdsAMActionTypes"],function(a,b,c,d,e,f,g,h){var i={initializeAccount:function(j){g.handleInitialization({actionType:h.ACCOUNT_INIT,account:j});},initializeAudiences:function(j,k){g.handleInitialization({actionType:h.AUDIENCE_INIT,audiences:j,paging:k});},initializeAudiencesFailed:function(j,k){g.handleInitialization({actionType:h.AUDIENCE_INIT_FAILED,result:j,rawData:k});},appendAudiences:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_APPEND,audiences:j});},addAudience:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_ADD,audience:j});},deleteAudience:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DELETE,audience:j});},deleteAudienceFailed:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DELETE_FAILED,result:j,rawData:k});},deleteAudiences:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_BULK_DELETE,audiences:j});},updateAudience:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_CHANGE,audience:j,changedProperties:k});},sortAudience:function(j,k,l){g.handleUpdateFromViewAction({actionType:h.AUDIENCE_SORT,sortOrder:j,sortKey:k,compareFunction:l});},initializeAudienceDetailsContent:function(j){g.handleInitialization({actionType:h.AUDIENCE_DETAILS_AUDIENCE_INITIALIZE,audience:j});},updateAudienceStatuses:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_STATUS,audienceID:j,audienceStatuses:k});},updateUsageHistory:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_USAGE,audienceID:j,audienceUsageHistory:k});},updateAccountIDs:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_ACCOUNTS,audienceID:j,accountIDs:k});},updatePixel:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_PIXEL,audienceID:j,pixel:k});},error:function(j,k,l){g.handleInitialization({actionType:h.ERROR,result:j,rawData:k,error:l});},clearErrors:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLEAR_ERRORS});}};e.exports=i;},null);
__d("AdsActionSelector.react",["ContextualLayer.react","LayerHideOnBlur","Link.react","React","ReactChildren","ReactLayeredComponentMixin","XUIPopoverButton.react","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=j.PropTypes,r=j.createClass({displayName:'AdsActionSelector',mixins:[l],propTypes:{alignment:q.oneOf(['left','right','center']),disabled:q.bool,maxHeight:q.number,onAction:q.func.isRequired,position:q.oneOf(['above','below','left','right']),size:j.PropTypes.oneOf(['small','medium','large','xlarge','xxlarge'])},getInitialState:function(){return {showMenu:false};},render:function(){var s=this.props,t=s.className,u=s.disabled,v=s.use,w=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(s,{className:1,disabled:1,use:1});t=p("_2ljj","_5myu",t);v=v||'default';return (j.createElement(m,Object.assign({},w,{className:t,depressed:v=='default'&&this.state.showMenu,disabled:u,onClick:u?null:this._showMenu,ref:"menuOpener",use:v})));},renderLayers:function(){if(this.state.showMenu&&!this.props.disabled){var s=k.map(this.props.children,function(u,v){return n(u,{optionName:'option_'+v,onOptionSelect:this._onOptionSelect});}.bind(this)),t=this.props.maxHeight?{maxHeight:this.props.maxHeight,overflow:'auto'}:undefined;return {layer:j.createElement(g,{alignment:this.props.alignment,key:"menu",behaviors:{LayerHideOnBlur:h},contextRef:"menuOpener",position:this.props.position?this.props.position:"below",onToggle:this._onMenuToggle,shown:true},j.createElement(j.DOM.div,{className:"_2ljk",style:t,role:"menu"},s))};}else return null;},_showMenu:function(){if(!this.state.showMenu)this.setState({showMenu:true});},_removeMenu:function(){if(this.state.showMenu&&this.isMounted())this.setState({showMenu:false});},_onMenuToggle:function(s){if(!s)setTimeout(this._removeMenu,16);},_onOptionSelect:function(s){this.setState({showMenu:false});this.props.onAction(s);}});r.Option=j.createClass({displayName:'Option',propTypes:{value:j.PropTypes.string.isRequired,disabled:j.PropTypes.bool},render:function(){if(this.props.disabled)return (j.createElement(j.DOM.div,{className:"_34vf"},this.props.children));return (j.createElement(i,{className:"_2ljl",onClick:this._onClick},this.props.children));},_onClick:function(event){event.preventDefault();this.props.onOptionSelect(this.props.value);}});r.Separator=j.createClass({displayName:'Separator',render:function(){return j.createElement(j.DOM.div,{className:"_1ydq"});}});e.exports=r;},null);
__d("AdsCreateAudienceActionSelector.react",["AdsActionSelector.react","AudienceManagerUIConstants","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){var k=g.Option,l=h.CREATE_AUDIENCE_ACTION_TYPE,m=i.createClass({displayName:'AdsCreateAudienceActionSelector',propTypes:{onAction:i.PropTypes.func.isRequired,disabled:i.PropTypes.bool},render:function(){var n="Create Audience",o=[i.createElement(k,{value:l.CUSTOM_AUDIENCE},"Custom Audience"),i.createElement(k,{value:l.LOOKALIKE},"Lookalike Audience")];return (i.createElement(g,Object.assign({use:"special"},this.props,{label:n}),o));}});e.exports=m;},null);
__d("AdsPixelInsights.react",["SpectrumChart","SpectrumLines","Link.react","React","SpectrumTimeScale","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","XUISpinner.react","SpectrumYAxis","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=j.createClass({displayName:'AdsPixelInsights',propTypes:{pixelId:j.PropTypes.string.isRequired,dao:j.PropTypes.object.isRequired,height:j.PropTypes.number.isRequired,width:j.PropTypes.number.isRequired},getInitialState:function(){return {dataLoaded:false,startDate:null,endDate:null,lines:[],duration:1};},componentWillMount:function(){this._loadInsightsForPixel(this.state.duration);},render:function(){if(!this.state.dataLoaded)return (j.createElement(o,{className:"_5swe",size:"small",background:"light"}));if(!this.state.lines.length)return (j.createElement(j.DOM.div,{className:"_5kkb"},"No pixel events received from your website in the last one week"));var t=this._getSampledData(),u=null;if((this.state.lines[0].length-1)%this._getSamplingRate())u=t[0].length-1;return (j.createElement(j.DOM.div,null,this._renderDurationLinks(),j.createElement(g,{scaleX:k().domain([this.state.startDate,this.state.endDate]).interval(k.Intervals.Hour),height:this.props.height,width:this.props.width,theme:{lines:{colors:[l.FB_BLUE]}}},j.createElement(h,{base:'bottom',data:t,partialValue:function(v,w){return w==u;},titles:["Pixel Events"],valueX:function(v,w){return new Date(v[0]);},valueY:function(v,w){return v[1]||0;}}),j.createElement(n,{ticks:t[0].length,secondaryTicks:true}),j.createElement(p,null),j.createElement(m,null))));},_renderDurationLinks:function(){return (j.createElement(j.DOM.div,null,j.createElement(j.DOM.div,{className:"_1uju _1ujv"},this._renderLinkIfNeeded("Last 24 hours",1)),j.createElement(j.DOM.div,{className:"_1uju _1ujv"},this._renderLinkIfNeeded("Last 7 days",7)),j.createElement(j.DOM.div,{className:"_1ujw"})));},_renderLinkIfNeeded:function(t,u){if(this.state.duration===u)return t;return (j.createElement(i,{onClick:this._loadInsightsForPixel.bind(this,u)},t));},_loadInsightsForPixel:function(t){this.props.dao.fetch.pixelInsights.one(function(u){if(!u.length){this.setState({dataLoaded:true});return;}var v=u[u.length-1].timestamp,w=u[0].timestamp,x=[[]];for(var y=0,z=u.length;y<z;y++)x[0].push([u[y].timestamp,parseInt(u[y].data[0].count,10)]);this.setState({dataLoaded:true,startDate:new Date(w),endDate:new Date(v),lines:x,duration:t});}.bind(this),{pixelId:this.props.pixelId,start_time:'-'+t+' days',aggregation:'pixel_fire'});},_getSampledData:function(){var t=this._getSamplingRate(),u=this.state.lines[0],v=[];for(var w=0;w<u.length;w++)if(w%t===0)v.push(u[w]);if((u.length-1)%t)v.push(u[u.length-1]);return [v];},_getSamplingRate:function(){return this.state.duration===1?3:6;}});e.exports=s;},null);
__d("AdsCreateLookalikeDialogRangeInput.react",["Event","React","UserAgent_DEPRECATED","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=135,m=h.createClass({displayName:'AdsCreateLookalikeDialogRangeInput',propTypes:{className:h.PropTypes.string,min:h.PropTypes.number.isRequired,max:h.PropTypes.number.isRequired,step:h.PropTypes.number,value:h.PropTypes.number,disabled:h.PropTypes.bool,onChange:h.PropTypes.func},getInitialState:function(){return {value:this.props.value||this.props.min,pressed:false};},componentDidMount:function(){var n=i.ie()<9?document.documentElement:window;g.listen(n,{mousemove:function(o){return this._onMouseMove(o);}.bind(this),mouseup:function(o){return this._onMouseUp(o);}.bind(this)});},componentWillReceiveProps:function(n){if(n.value!==this.props.value)this.setState({value:n.value});},_onMouseDown:function(event){if(!this.props.disabled){g.prevent(event);this.setState({pressed:true,dragStartValue:this.state.value,dragStartX:event.nativeEvent.clientX});}},_onMouseMove:function(event){if(this.state.pressed){var n=(event.clientX-this.state.dragStartX),o=(this.props.max-this.props.min)/l,p=this.state.dragStartValue+(n*o),q=this.props.min,r=this.props.max;p=p<q?q:p;p=p>r?r:p;this.setState({value:p});this._onChange();}},_onMouseUp:function(event){if(this.state.pressed)this.setState({pressed:false});},_onChange:function(){if(this.props.onChange){var n=this.state.value,o=this.props.step;if(o){n=Math.round(n/o)*o;this.props.onChange(n);}}},render:function(){var n=this.props,o=this.state,p=n.max-n.min,q=(o.value-n.min)/p,r=Math.round(q*l),s=(("_38v0")+(n.disabled?' '+"_19ys":''));return (h.createElement(h.DOM.div,Object.assign({},this.props,{className:k(this.props.className,s)}),h.createElement(h.DOM.div,{ref:"thumbWrapper",className:"_5cy-",style:{left:r+'px'},onMouseDown:n.disabled?null:this._onMouseDown,onDragStart:g.prevent},h.createElement(h.DOM.div,{className:(("_5cy_")+(o.pressed?' '+"_38v3":''))}))));},getThumb:function(){return this.refs&&this.refs.thumbWrapper;}});e.exports=m;},null);
__d("AdsCreateLookalikeDialogTooltipRangeInput.react",["AdsCreateLookalikeDialogRangeInput.react","React","Tooltip","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'AdsCreateLookalikeDialogTooltipRangeInput',propTypes:{min:h.PropTypes.number.isRequired,max:h.PropTypes.number.isRequired,step:h.PropTypes.number,value:h.PropTypes.number,tooltip:h.PropTypes.string,onChange:h.PropTypes.func},render:function(){return (h.createElement(g,Object.assign({},this.props,{ref:"rangeInput",className:k(this.props.className,"_2blb")})));},componentDidMount:function(){this._updateTooltip();},componentDidUpdate:function(){this._updateTooltip();},_updateTooltip:function(){var m=this.refs.rangeInput.getThumb().getDOMNode(),n=this.props.tooltip;if(n){i.set(m,n,'above','center');}else i.remove(m);}});e.exports=l;},null);
__d("AdsCreateLookalikeDialogCountryTypeahead.react",["AbstractTypeahead.react","AdsAudienceTypeaheadPresenter.react","AdsCreateLookalikeConfig","AdsStaticSearchSource","React","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.countries,p=k.createClass({displayName:'AdsCreateLookalikeDialogCountryTypeahead',propTypes:{country:k.PropTypes.string,onSelectAttempt:k.PropTypes.func.isRequired},getInitialState:function(){return {country:undefined,queryString:''};},componentWillMount:function(){this._updateSelectedCountry(this.props.country);var q=[];for(var r in o)q.push({key:r,name:this._getCountryDisplayName(r,o[r].name)});this._searchSource=new j(q,{getAllForEmptyQuery:true,limit:q.length});this._presenter=l(h,{maxEntries:q.length});},componentWillReceiveProps:function(q){this._updateSelectedCountry(q.country);},render:function(){return (k.createElement(g,{className:"_5w0y",selectedEntry:null,placeholder:"Choose a country to target...",presenter:this._presenter,searchSource:this._searchSource,queryString:this.state.queryString,showEntriesOnFocus:true,entriesWidthMatchContext:this.isMounted(),onSelectAttempt:this._onSelectAttempt,onChange:this._onInputChange,onBlur:this._onBlur,autoHighlight:true}));},componentDidMount:function(){this.forceUpdate();},_getCountryDisplayName:function(q){return (n._("{name} ({countryCode})",[n.param("name",o[q].name),n.param("countryCode",q)]));},_updateSelectedCountry:function(q){this.setState({country:q,queryString:q&&this._getCountryDisplayName(q)||''});},_onBlur:function(){var q=this.state.country;if(q)this.setState({queryString:this._getCountryDisplayName(q)});},_onInputChange:function(event){var q=event.target.value;if(!q){this.props.onSelectAttempt(undefined);}else this.setState({queryString:q});},_onSelectAttempt:function(q){var r=q.getUniqueID();this.props.onSelectAttempt(r);}});e.exports=p;},null);
__d("AdsCreateLookalikeDialogSourceTypeahead.react",["AbstractTypeahead.react","AdsAudienceTypeaheadPresenter.react","AdsLookalikeGKConfig","React","SearchableEntry","WebAsyncSearchSource","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o='/ajax/typeahead/ads_lookalike_source.php',p=("Choose a custom audience, a conversion tracking pixel, or a page.");if(i.shouldShowAppLookalikeCreationUI)p=("Choose a custom audience, a conversion tracking pixel, a page, or an application.");var q={},r=j.createClass({displayName:'AdsCreateLookalikeDialogSourceTypeahead',propTypes:{accountID:j.PropTypes.string.isRequired,source:j.PropTypes.instanceOf(k),onSelectAttempt:j.PropTypes.func.isRequired},getInitialState:function(){return {source:undefined,queryString:''};},componentWillMount:function(){this._updateSelectedSource(this.props.source);},componentWillReceiveProps:function(s){this._updateSelectedSource(s.source);},render:function(){return (j.createElement(g,{className:"_5w0y",selectedEntry:null,placeholder:p,presenter:h,searchSource:this._getSearchSource(this.props.accountID),queryString:this.state.queryString,showEntriesOnFocus:true,entriesWidthMatchContext:this.isMounted(),onSelectAttempt:this.props.onSelectAttempt,onChange:this._onInputChange,onBlur:this._onBlur,autoHighlight:true}));},componentDidMount:function(){this.forceUpdate();},_getSearchSource:function(s){if(!q[s]){var t={uri:o,data:{account_id:s}};q[s]=new l({bootstrapRequests:[t],queryRequests:[t],getAllForEmptyQuery:true});}return q[s];},_updateSelectedSource:function(s){this.setState({source:s,queryString:s&&s.getTitle()||''});},_onBlur:function(){var s=this.state.source;if(s)this.setState({queryString:s.getTitle()});},_onInputChange:function(event){var s=event.target.value;if(!s){this.props.onSelectAttempt(undefined);}else this.setState({queryString:s});}});e.exports=r;},null);
__d("XAdsLookalikeSuggestedCountryControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){e.exports=b("XControllerURIBuilder").create("\/ads\/ajax\/lookalike\/suggested_country\/",{origin_audience_id:{type:"Int",required:true}});},null);
__d("AudienceManagerLookalikeDialog.react",["AdsAMViewActions","AdsCreateLookalikeConfig","AdsCreateLookalikeDialogTooltipRangeInput.react","AdsCreateLookalikeDialogCountryTypeahead.react","AdsCreateLookalikeDialogSourceTypeahead.react","AsyncRequest","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","SearchableEntry","XAdsLookalikeSuggestedCountryControllerURIBuilder","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","adsGKCheck","ads-cluster-constants","copyProperties","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=b('ads-lib-formatters').createLimitedSigFigNumberFormatter(0,2),ha=h.countries,ia=ca.LOOKALIKE_SOURCE_TYPE,ja=ca.LOOKALIKE_CUSTOM_RATIO_LIMIT,ka={CUSTOM_AUDIENCE:("Custom Audience"),CONVERSION_PIXEL:("Conversion Pixel"),PAGE:("Page"),APPLICATION:("Application")},la=q.createClass({displayName:'AudienceManagerLookalikeDialog',propTypes:{accountID:q.PropTypes.string.isRequired,audience:q.PropTypes.object,dao:q.PropTypes.object.isRequired,onAudienceAdded:q.PropTypes.func.isRequired},getInitialState:function(){return {loading:false,isFinancialService:false,error:null,source:undefined,country:undefined,ratio:ja.MIN};},render:function(){return (q.createElement(t,{shown:true,width:630,behaviors:{LayerHideOnEscape:p},onToggle:this._onToggle},q.createElement(y,null,"Create Lookalike Audience"),q.createElement(u,null,q.createElement(q.DOM.div,{className:"_wm-"},this._renderError(),this._renderDialogBody())),q.createElement(w,null,q.createElement(v,{onClick:this._onCancel,disabled:this.state.loading}),q.createElement(x,{use:"confirm",action:"confirm",label:"Create Audience",disabled:this.state.loading||!this._canCreate(),onClick:this._onCreateLookalike}))));},_renderDialogBody:function(){if(this.state.loading)return (q.createElement(q.DOM.div,{className:"_5saq"},q.createElement(aa,{background:"light",size:"large"})));var ma=[q.createElement(n,{label:"Source",className:"_wn1",type:"data"},q.createElement(k,{accountID:this.props.accountID,source:this.state.source,onSelectAttempt:this._onSourceSelected})),q.createElement(n,{label:"Country",className:"_wn1",type:"data"},q.createElement(j,{ref:"countryTypeahead",country:this.state.country,onSelectAttempt:this._onCountrySelected})),q.createElement(n,{label:"Optimize for",className:"_wn2",type:"data"},q.createElement(q.DOM.div,null,q.createElement(q.DOM.div,null,q.createElement(q.DOM.span,{className:"_wn3"},"Similarity"),q.createElement(q.DOM.div,{className:"_wn4"},q.createElement(i,{min:ja.MIN,max:ja.MAX,step:ja.GRANULARITY,initValue:this.state.ratio,tooltip:this._getAudienceSizeText(),disabled:!this._canCreate(),onChange:this._onAudienceSizeChange})),q.createElement(q.DOM.span,{className:"_wn3"},"Reach")),q.createElement(q.DOM.p,{className:"_wn5"},"Audiences that are optimized for similarity will behave more like your source compared to larger audiences that are optimized for reach.")))];if(ba('financial_service_lookalike'))ma.push(q.createElement(n,null,q.createElement(q.DOM.div,null,q.createElement(q.DOM.input,{type:"checkbox",checked:this.state.isFinancialService,onChange:this._toggleFinancialService}),"Use this lookalike audience in financial service")));return (q.createElement(q.DOM.div,null,q.createElement(q.DOM.p,{className:"_wm_"},"Reach new people who are similar to an audience you care about. Select a source and a country below, then choose an optimization."),q.createElement(m,{className:"_wn0"},q.createElement(o,null,ma))));},componentWillMount:function(){this._init();},_init:function(){if(this.props.audience){var ma={uniqueID:this.props.audience.id,title:this.props.audience.name};ma.subtitle=ka.CUSTOM_AUDIENCE;ma.type=ia.CUSTOM_AUDIENCE;this.setState({source:new r(ma)});this._loadSuggestedCountry(this.props.audience.id);}},_canCreate:function(){return !!(this.state.source&&this.state.country);},_toggleFinancialService:function(ma){this.setState({isFinancialService:ma.target.checked});},_onSourceSelected:function(ma){var na=this.state.source;if(ma&&(!na||ma.getUniqueID()!==na.getUniqueID()))this._loadSuggestedCountry(ma.getUniqueID());this.setState({source:ma});},_onCountrySelected:function(ma){this.setState({country:ma});},_onAudienceSizeChange:function(ma){this.setState({ratio:parseFloat(ma),ratioChanged:true});},_getApproximateAudienceSize:function(ma,na){var oa=Math.floor(ha[ma].count*na);return ga(oa);},_getAudienceSizeText:function(){if(!this._canCreate())return '';var ma=this._getApproximateAudienceSize(this.state.country,this.state.ratio);return (fa._("{size} people",[fa.param("size",ma)]));},_renderError:function(){if(this.state.error)return (q.createElement(q.DOM.div,{className:"_wn6"},q.createElement(z,{use:"warn"},this.state.error.message)));},_onCreateLookalike:function(){var ma=this.state.source,na=this.state.country,oa=this.state.ratio,pa;this.setState({error:null});var qa={accountId:this.props.accountID,lookalike_spec:{country:na,ratio:oa,is_financial_service:this.state.isFinancialService},handleError:(function(ra,sa){this.setState({loading:false,error:sa&&sa.error});}).bind(this)};switch(ma.getType()){case ia.CUSTOM_AUDIENCE:pa='createLookalikeCluster';qa.origin_audience_id=ma.getUniqueID();qa.lookalike_spec.type=ca.LOOKALIKE_CUSTOM_RATIO;break;case ia.CONVERSION_PIXEL:pa='createActionsLookalike';da(qa.lookalike_spec,{pixel_ids:[ma.getUniqueID()],conversion_type:'offsite'});break;case ia.PAGE:pa='createActionsLookalike';da(qa.lookalike_spec,{page_id:ma.getUniqueID(),conversion_type:'page_like'});break;case ia.APPLICATION:pa='createActionsLookalike';da(qa.lookalike_spec,{app_id:ma.getUniqueID(),conversion_type:'engaged_app_users'});break;default:return;}this.props.dao.add[pa].one((function(ra){this.setState({loading:false});this.props.onAudienceAdded(ra.id);g.closeLookalikeDialog();}.bind(this)),qa);this.setState({loading:true});},_loadSuggestedCountry:function(ma){var na=(new s()).setInt('origin_audience_id',ma).getURI(),oa=(new l()).setURI(na).setHandler((function(pa){var qa=this.state.source.getUniqueID(),ra=this.refs.countryTypeahead;if(qa===ma&&!ra.state.queryString){var sa=pa&&pa.payload;if(ha[sa])this.setState({country:sa});}}.bind(this))).setErrorHandler(function(pa){});oa.send();},_onToggle:function(){g.closeLookalikeDialog();},_onCancel:function(){g.closeLookalikeDialog();}});e.exports=la;},null);
__d("AudienceManagerBlankState.react",["AdInterfacesUiLogger","AdsAMViewActions","AdsManagerEmptyStateInfo.react","AsyncRequest","AudienceManagerCreateAudienceDialog.react","AudienceManagerLoggingEvents","AudienceManagerLookalikeDialog.react","Link.react","React","URI","XUIButton.react","XUIText.react","adsGKCheck","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=o.createClass({displayName:'AudienceManagerBlankState',propTypes:{dao:o.PropTypes.object.isRequired,onAudienceAdded:o.PropTypes.func.isRequired,showLookalikeDialog:o.PropTypes.bool.isRequired,accountId:o.PropTypes.string.isRequired,tosAccepted:o.PropTypes.object.isRequired,tosRequirementsForAccount:o.PropTypes.object.isRequired,autoLaunch:o.PropTypes.object,canWrite:o.PropTypes.bool},getInitialState:function(){return {showCreateAudienceDialog:false,ignoreLinkClicks:false};},render:function(){var w=o.createElement(k,{dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,showDialog:this.state.showCreateAudienceDialog,onCancel:this._onCreateAudienceDialogCancel,accountId:this.props.accountId,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount,autoLaunch:this.props.autoLaunch}),x="Reach the People Who Matter to You";return (o.createElement(o.DOM.div,{className:"_3yh5"},o.createElement(i,{message:x},this._renderBodyAndHelpLink(),this._renderCreateCustomAudiences(),this._renderCreateLookalikeAudiences(),w,this._renderLookalikeDialog())));},_renderBodyAndHelpLink:function(){return (o.createElement(o.DOM.div,{className:"_2b16"},"Create and save audiences to reach the people who matter to your business.",o.createElement(n,{href:p('/help/459892990722543'),target:"_blank",className:"mls"},"Learn More")));},_renderScheduleCall:function(){if(!s('smb_custom_audiences_support_unit'))return;return (o.createElement(r,{size:"small",className:"_3-9b"},o.createElement(n,{onClick:this._onHelpClicked},"Get Free Support")));},_renderCreateCustomAudiences:function(){return (o.createElement(o.DOM.div,{className:"_2b17"},o.createElement(r,{display:"block",className:"fcb"},o.createElement(r,{display:"block",weight:"bold"},"Custom Audiences"),o.createElement(r,{size:"small"},"Connect with the people who have already shown an interest in your business or product with Custom Audiences. You can create an audience from your customer contacts, website traffic or mobile app.")),o.createElement(q,{use:"confirm",size:"medium",label:"Create a Custom Audience",onClick:this._onCreateAudienceButtonClick,className:"_2b18"}),this._renderScheduleCall()));},_renderCreateLookalikeAudiences:function(){return (o.createElement(o.DOM.div,{className:"_2b17"},o.createElement(r,{display:"block",className:"fcb"},o.createElement(r,{display:"block",weight:"bold"},"Lookalike Audiences"),o.createElement(r,{size:"small"},"Reach new people who are similar to audiences you already care about. You can create a lookalike audience based on people who like your Page, conversion pixels or any of your existing Custom Audiences.")),o.createElement(q,{use:"confirm",size:"medium",label:"Create a Lookalike Audience",onClick:this._onCreateLookalikeButtonClick,className:"_2b18"}),this._renderScheduleCall()));},_renderLookalikeDialog:function(){if(this.props.showLookalikeDialog)return (o.createElement(m,{accountID:this.props.accountId,audience:null,dao:this.props.dao,onAudienceAdded:this._onLookalikeAudienceAdded}));},_onLookalikeAudienceAdded:function(w){this.props.onAudienceAdded(w);},_onCreateAudienceDialogCancel:function(){this.setState({showCreateAudienceDialog:false});},_onCreateLookalikeButtonClick:function(){g.log(l.AM_LAL_NUX_CREATE_AUDIENCE);h.showLookalikeDialog(null);},_onCreateAudienceButtonClick:function(){g.log(l.AM_CA_NUX_CREATE_AUDIENCE);this.setState({showCreateAudienceDialog:true});},_onHelpClicked:function(){if(this.state.ignoreLinkClicks)return;this.setState({ignoreLinkClicks:true});new j().setURI('/ajax/help/contact/676632195760106').setHandler(function(){return this.setState({ignoreLinkClicks:false});}.bind(this)).send();}});e.exports=v;},null);
__d("AudienceManagerDeleteDialog.react",["AdsAMViewActions","AudienceManagerUIConstants","React","XUISortableDataTable.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=i.createClass({displayName:'AudienceManagerDeleteDialog',propTypes:{audience:i.PropTypes.object.isRequired,dao:i.PropTypes.object.isRequired,onAudienceDeleted:i.PropTypes.func.isRequired},getInitialState:function(){return {name:this.props.audience.name,adGroups:null,lookalikes:null};},_loadLookalikes:function(u){this.props.dao.fetch.anyIDs.one(function(v){this.setState({lookalikes:v});this._loadAdGroups(Object.keys(v).concat(this.props.audience.id));}.bind(this),{ids:u});},_loadAdGroups:function(u){var v={},w=u.map(function(x){return {parameters:{audienceId:x},callback:function(y){y.forEach(function(z){var aa=z.id;if(v[aa]){v[aa].audiences.push(x);}else{z.audiences=[x];v[aa]=z;}});}};});this.props.dao.fetch.adGroupsForCustomaudiences.multi(function(){return this.setState({adGroups:v});}.bind(this),{requests:w});},componentWillMount:function(){var u=this.props.audience.id;this.props.dao.fetch.anyIDs.one(function(v){var w=v&&v[u]&&v[u].lookalike_audience_ids;if(w&&w.length>0){this._loadLookalikes(w);}else{this.setState({lookalikes:{}});this._loadAdGroups([u]);}}.bind(this),{ids:u});},render:function(){var u=this.state.lookalikes&&Object.keys(this.state.lookalikes).length>0;return (i.createElement(k,{shown:true,width:h.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},i.createElement(p,null,i.createElement(i.DOM.span,null,s._("Delete audience {audience name}?",[s.param("audience name",this.state.name)]))),i.createElement(l,null,i.createElement(i.DOM.div,{className:"_5rkr"},this._renderDialogBody())),i.createElement(n,null,i.createElement(m,{use:"default",action:"close",onClick:this._onCancelClick}),i.createElement(o,{use:"confirm",action:"confirm",onClick:this._onDeleteClick,enabled:this._dataLoaded(),label:u?("Delete Audiences"):("Delete Audience")}))));},_dataLoaded:function(){var u=this.state;return u.adGroups!==null&&u.lookalikes!==null;},_renderDialogBody:function(){if(!this._dataLoaded()){return (i.createElement(i.DOM.div,{className:"_5saq"},i.createElement(i.DOM.p,null,"Please wait while we find the ads which use this audience..."),i.createElement(q,{size:"large"})));}else return this._renderConfirmMessage();},_renderConfirmMessage:function(){var u=this.state.adGroups,v=this.state.lookalikes,w=this.state.name;if(Object.keys(u).length===0)if(Object.keys(v).length===0){return (s._("Deleting \"{name}\" will permanently remove it from your account. You won't be able to restart any ads that used this audience in the past.",[s.param("name",w)]));}else return (i.createElement(i.DOM.div,null,i.createElement(i.DOM.p,null,s._("\"{name}\" was used to create one or more lookalike audiences.",[s.param("name",w)])),i.createElement(i.DOM.p,null,"Deleting this audience will permanently remove it from your account along with the associated lookalike audiences. You won't be able restart any ads that have used these audiences in the past.")));var x=[{id:'adGroup',label:"Ad"},{id:'audiences',label:"Audiences"}],y=Object.keys(u).map(function(aa){var ba=u[aa];return {adGroup:ba.name,audiences:ba.audiences.map(function(ca){if(ca===this.props.audience.id){return w;}else return v[ca].name;}.bind(this)).map(function(ca){return i.createElement(i.DOM.span,null,ca,i.createElement(i.DOM.br,null));})};}.bind(this)),z=(i.createElement(i.DOM.div,{className:"_256f"},i.createElement(j,{rows:y,columns:x,columnToSortBy:"adGroup",outerBorder:true})));if(Object.keys(v).length>0){return (i.createElement(i.DOM.div,null,i.createElement(i.DOM.p,null,s._("\"{name}\" was used to create one or more lookalike audiences. These audiences are also currently being used in active ads.",[s.param("name",w)])),i.createElement(i.DOM.p,null,"Deleting these audiences will permanently remove them from your account and automatically stop the following ads. You won't be able to restart any ads that have used these audiences in the past."),z));}else return (i.createElement(i.DOM.div,null,i.createElement(i.DOM.p,null,s._("\"{name}\" is currently being used in active ads.",[s.param("name",w)])),i.createElement(i.DOM.p,null,"Deleting this audience will permanently remove it from your account and automatically stop the following ads. You won't be able restart any ads that used this audience in the past."),z));},_onCancelClick:function(){g.closeDeleteAudienceDialog();},_onDeleteClick:function(){this.props.onAudienceDeleted(this.props.audience);g.closeDeleteAudienceDialog();},_onToggle:function(){g.closeDeleteAudienceDialog();}});e.exports=t;},null);
__d("AudienceManagerNuxTypes",[],function(a,b,c,d,e,f){e.exports={WEBSITE_CUSTOM_AUDIENCE:'web_remarketing_am'};},null);
__d("AdsNUXController",["AsyncRequest","React","abstractMethod","cloneWithProps","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';function l(){this.$AdsNUXController0();}l.prototype.complete=function(m){var n=this.__getUnreadStories(),o=n[m];if(o&&o.hide_uri)new g().setURI(o.hide_uri).send();delete n[m];};l.prototype.display=function(m){this.__loadComponent(m.name,function(n){this.$AdsNUXController1=m;this.$AdsNUXController2=n;this.$AdsNUXController3=true;this.$AdsNUXController4();}.bind(this));};l.prototype.hasSeen=function(m){var n=this.__getUnreadStories();return !n[m];};l.prototype.displayIfNotSeen=function(m,n){if(this.hasSeen(m))return;var o=this.__getUnreadStories(),p=o[m];if(n)p.onCompletedCallback=n;k(p);this.display(p);delete o[m];};l.prototype.$AdsNUXController4=function(){var m=this.$AdsNUXController2;k(m);var n=h.createElement(m,{visible:this.$AdsNUXController3,onCompleted:this.$AdsNUXController5.bind(this),onHide:this.$AdsNUXController6.bind(this)}),o=this.__loadComponentProperties(this.$AdsNUXController1.name);if(o)n=j(n,o);h.renderComponent(n,this.$AdsNUXController7);};l.prototype.$AdsNUXController5=function(){if(!this.$AdsNUXController1)return;if(this.$AdsNUXController1.onCompletedCallback)this.$AdsNUXController1.onCompletedCallback();if(this.$AdsNUXController1.hide_uri)new g().setURI(this.$AdsNUXController1.hide_uri).send();};l.prototype.$AdsNUXController6=function(){this.$AdsNUXController3=false;this.$AdsNUXController4();window.setTimeout(function(){h.unmountComponentAtNode(this.$AdsNUXController7);}.bind(this),2000);};l.prototype.$AdsNUXController0=function(){this.$AdsNUXController7=document.createElement('div');this.$AdsNUXController7.id='nux_container';document.body.appendChild(this.$AdsNUXController7);};l.prototype.__loadComponent=function(m,n){i.unimplemented('AdsNUXController','__loadComponent');};l.prototype.__loadComponentProperties=function(m){return null;};l.prototype.__getUnreadStories=function(){i.unimplemented('AdsNUXController','__getUnreadStories');};e.exports=l;},null);
__d("AdsAudienceManagerNUXController",["AdsAudienceManagerMegaphone","AudienceManagerNuxTypes","AdsNUXController","Bootloader"],function(a,b,c,d,e,f,g,h,i,j){'use strict';for(var k in i)if(i.hasOwnProperty(k))m[k]=i[k];var l=i===null?null:i.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=i;function m(){if(i!==null)i.apply(this,arguments);}m.prototype.__loadComponent=function(n,o){switch(n){case h.WEBSITE_CUSTOM_AUDIENCE:j.loadModules(["AdsPEWebRemarketingNux.react"],o);break;default:}};m.prototype.__loadComponentProperties=function(n){switch(n){case h.WEBSITE_CUSTOM_AUDIENCE:return {alignment:'right'};}return null;};m.prototype.__getUnreadStories=function(){return g.NUX;};e.exports=new m();},null);
__d("AdsAppTokenizerToken.react",["React","XUITokenizerToken.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:'AdsAppTokenizerToken',propTypes:h.propTypes,render:function(){var l=(("_13w9")+(this.props.entry.getAuxiliaryData()&&this.props.entry.getAuxiliaryData().invalid?' '+"_13wa":''));return (g.createElement(h,Object.assign({},this.props,{className:j(this.props.className,l)})));}});e.exports=k;},null);
__d("DummySearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.searchImpl=function(k,l,m){"use strict";l([],k);};e.exports=j;},null);
__d("AudienceManagerMembershipFormMixin.react",["AdsAppTokenizerToken.react","AdsConnectionObjTypes","AudienceManagerURLConstants","DummySearchSource","FileInput.react","Image.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","List.react","RadioList.react","React","SearchableEntry","XUIButton.react","XUIError.react","XUIMenuStaticItem.react","XUINotice.react","XUISelector.react","XUITokenizer.react","XUITypeaheadTextOnlyView.react","URI","adsGKCheck","cx","fbt","ix","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha=r.LabeledItem,ia={ADD:'add',REMOVE:'remove'},ja=10,ka=['csv','txt'],la=y.Option,ma={FORM_TYPE:{CREATE:'create',EDIT:'edit'},componentWillMount:function(){this.props.dao.fetch.connectionObjectsForAccount.one(function(na){na.data=na.data.filter(function(ra){return ra.type===h.APPLICATION;});if(na.data.length>1)return;var oa=this.state.appIdEntries,pa=function(ra){if(ra.is_first_party_app===false){var sa=new t({uniqueID:ra.id,title:ra.id,auxiliaryData:{invalid:false}});oa.push(sa);}},qa={parameters:{appId:na.data[0].id,fields:['is_first_party_app']},callback:pa};this.props.dao.fetch.appInfo.multi(function(){return this.setState({appIdEntries:oa});}.bind(this),{requests:[qa]});}.bind(this),{accountId:this.props.accountID});},getInitialState:function(){return {appIdEntries:[],queryString:'',searchSource:new j()};},_renderMembershipSection:function(na,oa){var pa=this._getTypeOptions(oa),qa=this._getTypeDesc(),ra=s.createElement(m,null,s.createElement(o,null,this._renderModeChoices(na),s.createElement(n,{label:"Data Type",className:"_3w1w"},s.createElement(q,{border:"none",spacing:"small",direction:"vertical",className:"_1e9-"},s.createElement(s.DOM.li,null,s.createElement(y,{onChange:this._handleTypeChange},pa)))),this._renderAppIDExplanationText(),this._renderAppIDTokenizer(),s.createElement(n,null,s.createElement(q,{border:"none"},s.createElement(s.DOM.li,null,this._renderDataTypeError(),this.state.selectedDataType in qa?s.createElement(x,null,s.createElement(s.DOM.span,{className:"_5wbz"},qa[this.state.selectedDataType])):s.createElement(s.DOM.span,null)),s.createElement(s.DOM.li,null,s.createElement(k,{accept:"text/plain, text/csv",onChange:this._onFileChange},s.createElement(u,{className:"_1e9_",href:{url:'#'},label:"Choose File"})),this._renderFileName(),s.createElement(s.DOM.div,null,"Files need to be in .csv or .txt format with one record per row."),this._renderFileErrorBox())))));return ra;},_renderModeChoices:function(na){if(na===this.FORM_TYPE.EDIT)return (s.createElement(n,{label:"Update Audience",className:"_3w1w"},s.createElement(r,{selectedValue:this.state.addRemoveMode,onValueChange:this._addRemoveRadioChanged},s.createElement(ha,{value:ia.ADD,className:"_1ea0"},"Add People"),s.createElement(ha,{value:ia.REMOVE,className:"_1ea0"},"Remove People"))));},_handleTypeChange:function(na){this.setState({selectedDataType:na.value});},_renderDataTypeError:function(){if(this.state.selectedFile&&!this.state.selectedDataType)return (s.createElement(s.DOM.div,{className:"mvm"},s.createElement(x,{use:"warn"},"Please select the data type for your file.")));},_onFileChange:function(na){var oa=na.target.files[0];if(oa){if(!oa.size){this.setState({selectedFile:oa,fileError:"File appears to be empty."});return;}var pa=(oa.name.indexOf('.')<0)?'':oa.name.split('.').pop(),qa=ka.indexOf(pa)!=-1;if(!qa){this.setState({selectedFile:oa,fileError:"File must be .csv or .txt format."});return;}this.setState({selectedFile:oa,fileError:null});}},_renderFileName:function(){var na;if(this.state.selectedFile&&this.state.selectedFile.name){na=this.state.selectedFile.name;}else na="No File Chosen";return (s.createElement(s.DOM.span,{className:"_1ea1"},na));},_renderFileErrorBox:function(){if(this.state.fileError)return (s.createElement(s.DOM.div,{className:"_1ea2"},this.state.fileError,s.createElement(l,{className:"_1ea3",src:fa('images/ads/createflow/creative/error-white.png')})));return s.createElement(s.DOM.span,null);},_renderAppIDExplanationText:function(){if(this._isAppIDRequired())return (s.createElement(n,null,s.createElement(s.DOM.div,null,"You can only upload IDs for people that download or use your Facebook app.",' ',ea._("You can find the ID for your Facebook apps in {=App Dashboard}",[ea.param("=App Dashboard",s.createElement(p,{target:"_blank",href:ba('https://developers.facebook.com/apps')},"App Dashboard"))]))));},_renderAppIDTokenizer:function(){if(this._isAppIDRequired()){var na={ViewRenderer:aa,TokenRenderer:g,useLayer:true};return (s.createElement(n,{label:"Facebook App ID"},s.createElement(v,{message:this._getAppIDErrorMessage()},s.createElement(z,{entries:this.state.appIdEntries,limit:ja,onAddEntryAttempt:this._onAddEntryAttempt,onEnterWithoutSelection:this._onEnterWithoutSelection,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemoveEntryAttempt,placeholder:this._getTokenizerPlaceholder(),presenter:na,queryString:this.state.queryString,searchSource:this.state.searchSource,tokenizeQueryStringOnBlur:this._tokenizeQueryString}))));}},_getAppIDErrorMessage:function(){if(this.state.appIdEntries.length===0||this._isAppIDTokensValid())return null;return ("One or more of the Facebook app IDs aren't connected to your account");},_getTokenizerPlaceholder:function(){return ("Add Facebook App ID");},_tokenizeQueryString:function(na){if(na)return new t({uniqueID:na,title:na});},_onEnterWithoutSelection:function(event){var na=event.target.value;if(na)this._onAddEntryAttempt(this._tokenizeQueryString(na));},_onQueryStringChange:function(event){this.setState({queryString:event.target.value});},_onAddEntryAttempt:function(na){var oa=na.getUniqueID(),pa=this.state.appIdEntries,qa=pa.some(function(ra){return ra.getUniqueID()===oa;});if(qa)return;this.props.dao.fetch.appInfo.one(function(ra){if(ra.is_first_party_app===false){na=new t({uniqueID:oa,title:oa,auxiliaryData:{invalid:false}});}else na=new t({uniqueID:oa,title:oa,auxiliaryData:{invalid:true}});pa.push(na);this.setState({appIdEntries:pa,queryString:''});}.bind(this),{appId:oa,fields:['is_first_party_app'],handleError:function(ra,sa,ta){na=new t({uniqueID:oa,title:oa,auxiliaryData:{invalid:true}});pa.push(na);this.setState({appIdEntries:pa,queryString:''});}.bind(this)});},_onRemoveEntryAttempt:function(na){var oa=this.state.appIdEntries,pa=oa.indexOf(na);if(pa>=0)oa.splice(pa,1);this.setState({appIdEntries:oa});},_getTypeOptions:function(na){var oa=[s.createElement(w,{className:"_1ea4",key:"static_select_one"},"Select one"),s.createElement(la,{value:ga.UPLOAD_TYPE_EMAIL,key:ga.UPLOAD_TYPE_EMAIL},"Emails"),s.createElement(la,{value:ga.UPLOAD_TYPE_UID,key:ga.UPLOAD_TYPE_UID},"User IDs"),s.createElement(la,{value:ga.UPLOAD_TYPE_PHONE,key:ga.UPLOAD_TYPE_PHONE},"Phone Numbers"),s.createElement(la,{value:ga.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,key:ga.UPLOAD_TYPE_MOBILE_ADVERTISER_ID},"Mobile Advertiser IDs")];if(na)oa.push(s.createElement(la,{value:ga.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN,key:ga.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN},"App User IDs"));return oa;},_getTypeDesc:function(){var na={};na[ga.UPLOAD_TYPE_EMAIL]="Files need to include emails only, in plain text format. Ex. name\u0040example.com";na[ga.UPLOAD_TYPE_UID]="Facebook user IDs must be numeric characters only. Ex: 9876543";na[ga.UPLOAD_TYPE_PHONE]="Phone numbers must include a country code and be numeric characters only. Ex: 16505551234";na[ga.UPLOAD_TYPE_MOBILE_ADVERTISER_ID]=na[ga.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN]=ea._("Mobile Advertising IDs include Android's advertising ID, Apple's Advertising Identifier (IDFA), and Facebook App User IDs. {link}",[ea.param("link",s.createElement(p,{href:i.MOBILE_ADVERTISING_IDS_DOC,target:"_blank"},"Learn more about Mobile Advertising IDs"))]);return na;},_isAppIDRequired:function(){return ca('audience_manager_uid_app_check')&&this.state.selectedDataType===ga.UPLOAD_TYPE_UID;},_isAppIDTokensValid:function(){if(!this._isAppIDRequired())return true;var na=this.state.appIdEntries,oa=na.some(function(pa){return pa.getAuxiliaryData().invalid;});return na.length>0&&!oa;}};e.exports=ma;},null);
/**
 * @providesModule sha256
 * @preserve-header
 *
 * Copyright (c) 2003, Christoph Bichlmeier
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the copyright holder nor the names of contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ''AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */__d("sha256",["str2rstr"],function(a,b,c,d,e,f,g){function h(fa,ga){return ((ga>>>fa)|(ga<<(32-fa)));}function i(fa,ga,ha){return ((fa&ga)^(~fa&ha));}function j(fa,ga,ha){return ((fa&ga)^(fa&ha)^(ga&ha));}function k(fa){return (h(2,fa)^h(13,fa)^h(22,fa));}function l(fa){return (h(6,fa)^h(11,fa)^h(25,fa));}function m(fa){return (h(7,fa)^h(18,fa)^(fa>>>3));}function n(fa){return (h(17,fa)^h(19,fa)^(fa>>>10));}function o(fa,ga){return (fa[ga&15]+=n(fa[(ga+14)&15])+fa[(ga+9)&15]+m(fa[(ga+1)&15]));}var p=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),q=new Array(8),r=new Array(2),s=new Array(64),t=new Array(16),u="0123456789abcdef";function v(fa,ga){var ha=(fa&65535)+(ga&65535),ia=(fa>>16)+(ga>>16)+(ha>>16);return (ia<<16)|(ha&65535);}function w(){r[0]=r[1]=0;q[0]=1779033703;q[1]=3144134277;q[2]=1013904242;q[3]=2773480762;q[4]=1359893119;q[5]=2600822924;q[6]=528734635;q[7]=1541459225;}function x(){var fa,ga,ha,ia,ja,ka,la,ma,na,oa;fa=q[0];ga=q[1];ha=q[2];ia=q[3];ja=q[4];ka=q[5];la=q[6];ma=q[7];for(var pa=0;pa<16;pa++)t[pa]=((s[(pa<<2)+3])|(s[(pa<<2)+2]<<8)|(s[(pa<<2)+1]<<16)|(s[pa<<2]<<24));for(var qa=0;qa<64;qa++){na=ma+l(ja)+i(ja,ka,la)+p[qa];if(qa<16){na+=t[qa];}else na+=o(t,qa);oa=k(fa)+j(fa,ga,ha);ma=la;la=ka;ka=ja;ja=v(ia,na);ia=ha;ha=ga;ga=fa;fa=v(na,oa);}q[0]+=fa;q[1]+=ga;q[2]+=ha;q[3]+=ia;q[4]+=ja;q[5]+=ka;q[6]+=la;q[7]+=ma;}function y(fa,ga){var ha,ia,ja=0;ia=((r[0]>>3)&63);var ka=(ga&63);if((r[0]+=(ga<<3))<(ga<<3))r[1]++;r[1]+=(ga>>29);for(ha=0;ha+63<ga;ha+=64){for(var la=ia;la<64;la++)s[la]=fa.charCodeAt(ja++);x();ia=0;}for(var la=0;la<ka;la++)s[la]=fa.charCodeAt(ja++);}function z(){var fa=((r[0]>>3)&63);s[fa++]=128;if(fa<=56){for(var ga=fa;ga<56;ga++)s[ga]=0;}else{for(var ga=fa;ga<64;ga++)s[ga]=0;x();for(var ga=0;ga<56;ga++)s[ga]=0;}s[56]=(r[1]>>>24)&255;s[57]=(r[1]>>>16)&255;s[58]=(r[1]>>>8)&255;s[59]=r[1]&255;s[60]=(r[0]>>>24)&255;s[61]=(r[0]>>>16)&255;s[62]=(r[0]>>>8)&255;s[63]=r[0]&255;x();}function aa(){var fa=0,ga=new Array(32);for(var ha=0;ha<8;ha++){ga[fa++]=((q[ha]>>>24)&255);ga[fa++]=((q[ha]>>>16)&255);ga[fa++]=((q[ha]>>>8)&255);ga[fa++]=(q[ha]&255);}return ga;}function ba(){var fa=new String();for(var ga=0;ga<8;ga++)for(var ha=28;ha>=0;ha-=4)fa+=u.charAt((q[ga]>>>ha)&15);return fa;}function ca(fa){var ga=0;for(var ha=0;ha<8;ha++)for(var ia=28;ia>=0;ia-=4)fa[ga++]=u.charCodeAt((q[ha]>>>ia)&15);}function da(fa,ga){w();y(fa,fa.length);z();if(ga){ca(ga);}else return ba();}function ea(fa,ga,ha){if(fa===null||fa===undefined)return null;ga=(typeof ga=='undefined')?true:ga;if(ga)fa=g(fa);return da(fa,ha);}e.exports=ea;},null);
__d("ads-crypto-email-hash",["sha256"],function(a,b,c,d,e,f,g){var h='sha256',i={getHashType:function(){return h;},hashEmail:function(j,k){return g(j,true,k);}};e.exports=i;},null);
__d("isInternationalPhoneNumber",["startsWith"],function(a,b,c,d,e,f,g){var h=/^1\(?\d{3}\)?\d{7}$/,i=/^47\d{8}$/,j=/^\d{1,4}\(?\d{2,3}\)?\d{4,}$/;function k(l){l=l.replace(/[\-\s]+/g,'').replace(/^\+?0{0,2}/,'');if(g(l,'0'))return false;if(g(l,'1'))return h.test(l);if(g(l,'47'))return i.test(l);return j.test(l);}e.exports=k;},null);
__d("AudienceTokenProcessor",["ads-crypto-email-hash","isEmail","isInternationalPhoneNumber","ads-cluster-constants","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=/^\d+$/,n=/^[0-9a-f]{32}$/,o=/^[0-9a-f]{64}$/,p=/^0*/,q=/[\-@#<>'",; ]|\(|\)|\+|[a-z]/gi,r=/[0-9a-z_\-]+/i;function s(t){"use strict";this.$AudienceTokenProcessor0=t;}s.prototype.processToken=function(t,u){"use strict";if(!t)return false;if(!this.$AudienceTokenProcessor0)this.$AudienceTokenProcessor0=this.$AudienceTokenProcessor1(t);switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor2(t,u);case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor3(t,u);case j.UPLOAD_TYPE_UID:return this.$AudienceTokenProcessor4(t,u);case j.UPLOAD_TYPE_PARTNER_TOKEN:return this.$AudienceTokenProcessor5(t,u);case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.getPayloadSchema=function(){"use strict";switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor7==='md5'?k.PHONE_MD5:k.PHONE_SHA256;case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor7==='md5'?k.EMAIL_MD5:k.EMAIL_SHA256;case j.UPLOAD_TYPE_UID:return l.UID;case j.UPLOAD_TYPE_PARTNER_TOKEN:return l.TOKEN;case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return l.THIRD_PARTY_TOKEN;case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return l.MOBILE_ADVERTISER_ID;}};s.prototype.isHash=function(){"use strict";return !!this.$AudienceTokenProcessor7;};s.prototype.$AudienceTokenProcessor6=function(t,u,v,w){"use strict";if(u.getUserCount()>0)u.appendString(',');u.appendString('"');u.appendUserToken(t,v,w);u.appendString('"');};s.prototype.$AudienceTokenProcessor2=function(t,u){"use strict";if(i(t)){t=t.replace(q,'').replace(p,'');this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor4=function(t,u){"use strict";if(m.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor5=function(t,u){"use strict";if(r.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor3=function(t,u){"use strict";t=t.toLowerCase();if(h(t)){this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor8=function(t){"use strict";if(this.$AudienceTokenProcessor7)return;this.$AudienceTokenProcessor7=t;};s.prototype.$AudienceTokenProcessor1=function(t){"use strict";if(h(t))return j.UPLOAD_TYPE_EMAIL;if(r.test(t))return j.UPLOAD_TYPE_PARTNER_TOKEN;return j.UPLOAD_TYPE_EMAIL;};s.prototype.getType=function(){"use strict";return this.$AudienceTokenProcessor0;};e.exports=s;},null);
__d("CustomAudienceBigPostPool",["ads-lib-connect","invariant","ads-cluster-constants","UserAgent_DEPRECATED","UrlMap","URI","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.FB,o=j.chrome()>22,p=3;function q(s){"use strict";this.$CustomAudienceBigPostPool0=s;this.$CustomAudienceBigPostPool1=0;this.$CustomAudienceBigPostPool2=[];}q.prototype.acquireBigPost=function(){"use strict";h(this.$CustomAudienceBigPostPool1<this.$CustomAudienceBigPostPool0);this.$CustomAudienceBigPostPool1++;if(this.$CustomAudienceBigPostPool2.length===0){return new r(this.releaseBigPost.bind(this));}else return this.$CustomAudienceBigPostPool2.shift();};q.prototype.releaseBigPost=function(s){"use strict";var t=false;for(var u=0;u<this.$CustomAudienceBigPostPool2.length;u++)if(this.$CustomAudienceBigPostPool2[u]===s)t=true;h(!t);this.$CustomAudienceBigPostPool2.push(s);this.$CustomAudienceBigPostPool1--;};function r(s){"use strict";if(o)this.$CustomAudienceBigPost0=new Uint8Array(i.CLUSTER_API_MAX_SIZE*500);this.$CustomAudienceBigPost1();this.releaseCallback=s;}r.prototype.$CustomAudienceBigPost1=function(){"use strict";if(o){this.$CustomAudienceBigPost2=0;this.$CustomAudienceBigPost3=0;this.appendString('payload');this.appendRawString('=');}else this.$CustomAudienceBigPost4='';this.$CustomAudienceBigPost5=0;this.appendString('{"data":[');};r.prototype.appendString=function(s){"use strict";if(o)s=encodeURIComponent(s);this.appendRawString(s);};r.prototype.appendRawString=function(s){"use strict";if(o){for(var t=0;t<s.length;t++)this.$CustomAudienceBigPost0[this.$CustomAudienceBigPost2++]=s.charCodeAt(t);}else this.$CustomAudienceBigPost4+=s;};r.prototype.appendUserToken=function(s,t,u){"use strict";if(t){if(o){var v=new Uint8Array(this.$CustomAudienceBigPost0.buffer,this.$CustomAudienceBigPost2,u);t(s,v);this.$CustomAudienceBigPost2+=u;}else this.$CustomAudienceBigPost4+=t(s);}else this.appendString(s);this.$CustomAudienceBigPost5++;};r.prototype.appendAppIDs=function(s){"use strict";this.appendString('], "app_ids": [');this.appendString(s.join());};r.prototype.appendPayloadSchema=function(s){"use strict";this.appendString('], "schema":"');this.appendString(s);this.appendString('"}');};r.prototype.request=function(s,t,u,v){"use strict";if(o){this.$CustomAudienceBigPost6(s,t,u,v);}else{u.payload=this.$CustomAudienceBigPost4;n.api(s,t,u,v);}};r.prototype.$CustomAudienceBigPost6=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3===0){if(!u.access_token)u.access_token=m.getAccessToken();u.suppress_http_code=1;t=(t||'get').toLowerCase();u.method=t;t=t==='get'?'get':'post';for(var w in u){this.appendRawString('&');this.appendString(w);this.appendRawString('=');this.appendString(u[w]);}}var x=new l(s),y=k.resolve('graph')+x.getPath(),z=new XMLHttpRequest();z.open(t,y,true);z.setRequestHeader('Content-type','application/x-www-form-urlencoded');z.onload=function(){var aa=JSON.parse(z.responseText);if(!aa||aa.error)if(this.$CustomAudienceBigPost7(s,t,u,v))return;this.$CustomAudienceBigPost8();v(aa);}.bind(this);z.onerror=function(){if(!this.$CustomAudienceBigPost7(s,t,u,v)){this.$CustomAudienceBigPost8();v(JSON.parse(z.responseText));}}.bind(this);z.send(new Uint8Array(this.$CustomAudienceBigPost0.buffer,0,this.$CustomAudienceBigPost2));};r.prototype.$CustomAudienceBigPost7=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3<p){this.$CustomAudienceBigPost3++;this.$CustomAudienceBigPost6(s,t,u,v);return true;}else return false;};r.prototype.$CustomAudienceBigPost8=function(){"use strict";this.$CustomAudienceBigPost1();this.releaseCallback(this);};r.prototype.getUserCount=function(){"use strict";return this.$CustomAudienceBigPost5;};e.exports=q;},null);
__d("BufferedTokenReader",["ArbiterMixin","copyProperties","fileSlice","invariant","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q){"use strict";j(a.FileReader!==undefined);this.$BufferedTokenReader0=p;this.$BufferedTokenReader1=new a.FileReader();this.$BufferedTokenReader1.onloadend=this.$BufferedTokenReader2.bind(this);this.$BufferedTokenReader3='';this.$BufferedTokenReader4=0;this.$BufferedTokenReader5=1;this.$BufferedTokenReader6=0;this.$BufferedTokenReader7=q;this.$BufferedTokenReader8=0;this.$BufferedTokenReader9=null;this.$BufferedTokenReadera=null;}o.prototype.nextToken=function(){"use strict";if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();while(this.$BufferedTokenReadera){this.$BufferedTokenReader9=this.$BufferedTokenReadera;this.$BufferedTokenReadera=null;this.$BufferedTokenReader8=0;this.readLines();if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();}if(!this.currentlyReading()&&!this.hasMore())if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return this.$BufferedTokenReaderc();}else return o.EOF;this.readLines();return null;};o.prototype.hasMore=function(){"use strict";return this.$BufferedTokenReader6<this.$BufferedTokenReader0.size;};o.prototype.progress=function(){"use strict";return this.$BufferedTokenReader6/this.$BufferedTokenReader0.size;};o.prototype.getNumTokens=function(){"use strict";return this.$BufferedTokenReader4;};o.prototype.getLineNumber=function(){"use strict";return this.$BufferedTokenReader5;};o.prototype.getFileSize=function(){"use strict";return this.$BufferedTokenReader0.size;};o.prototype.readLines=function(){"use strict";if(this.currentlyReading())return;if(this.hasMore())this.$BufferedTokenReader1.readAsText(this.$BufferedTokenReaderd());};o.prototype.currentlyReading=function(){"use strict";return this.$BufferedTokenReader1.readyState===a.FileReader.LOADING;};o.prototype.$BufferedTokenReaderb=function(){"use strict";if(this.$BufferedTokenReader9&&this.$BufferedTokenReader8<this.$BufferedTokenReader9.length)while(this.$BufferedTokenReader8<this.$BufferedTokenReader9.length){var p=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(o.LINE_BREAKS[p])if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}else{this.$BufferedTokenReader5++;this.$BufferedTokenReader8++;var q=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(p!=q&&o.LINE_BREAKS[q])this.$BufferedTokenReader8++;continue;}this.$BufferedTokenReader8++;if(p==='\0')continue;if(o.TOKEN_BREAKS[p]){if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}continue;}this.$BufferedTokenReader3+=p;}return false;};o.prototype.$BufferedTokenReaderc=function(){"use strict";var p=this.$BufferedTokenReader3;this.$BufferedTokenReader3='';return p;};o.prototype.$BufferedTokenReader2=function(){"use strict";j(!this.$BufferedTokenReadera);this.$BufferedTokenReadera=this.$BufferedTokenReader1.result;this.inform(o.DATA_LOADED_EVENT);};o.prototype.$BufferedTokenReaderd=function(){"use strict";var p=this.$BufferedTokenReader6,q=Math.min(this.$BufferedTokenReader6+this.$BufferedTokenReader7,this.$BufferedTokenReader0.size);this.$BufferedTokenReader6=q;return i.call(this.$BufferedTokenReader0,p,q);};h(o,{EOF:'\0\0',DATA_LOADED_EVENT:'bufferedlinereader_data_loaded',name:'BufferedTokenReader',LINE_BREAKS:{'\r':true,'\n':true},TOKEN_BREAKS:{'<':true,'>':true,'"':true,"'":true,',':true,' ':true,'|':true,'\t':true}});e.exports=o;},null);
__d("CAUploadSessionStatus",["copyProperties","invariant","CustomAudienceSessionTypesJS"],function(a,b,c,d,e,f,g,h,i){function j(l){"use strict";this.seq=l;this.size=0;this.last=false;this.status=j.INIT;this.startTime=0;this.latency=0;}j.prototype.start=function(){"use strict";this.startTime=Date.now();this.status=j.REQUESTED;};j.prototype.end=function(l){"use strict";this.latency=Date.now()-this.startTime;if(l){this.error=l;this.status=j.FAILED;}else this.status=j.SUCCEEDED;};j.prototype.toObject=function(){"use strict";var l={seq:this.seq,size:this.size,status:this.status,start_time:Math.round(this.startTime/1000),latency:this.latency};if(this.error)l.error=this.error;if(this.last)l.last=this.last;return l;};g(j,{INIT:'INIT',REQUESTED:'REQUESTED',FAILED:'FAILED',SUCCEEDED:'SUCCEEDED'});function k(){"use strict";this.name='ClusterUploadSession';this.clear();}k.prototype.clear=function(){"use strict";this.$CAUploadSessionStatus0=Math.ceil(Math.random()*16777216);this.$CAUploadSessionStatus1=0;this.$CAUploadSessionStatus2=0;this.$CAUploadSessionStatus3=0;this.$CAUploadSessionStatus4=0;this.$CAUploadSessionStatus5=0;this.$CAUploadSessionStatus6=0;this.$CAUploadSessionStatus7={};this.$CAUploadSessionStatus8=null;};k.prototype.isSessionCompleted=function(){"use strict";if(!this.isLastBatch())return false;for(var l in this.$CAUploadSessionStatus7){var m=this.$CAUploadSessionStatus7[l];if(m.status!=j.FAILED&&m.status!=j.SUCCEEDED)return false;}return true;};k.prototype.start=function(){"use strict";this.$CAUploadSessionStatus1=Date.now();};k.prototype.end=function(){"use strict";this.$CAUploadSessionStatus2=Date.now()-this.$CAUploadSessionStatus1;};k.prototype.startBatch=function(l,m){"use strict";this.$CAUploadSessionStatus4+=m;var n=this.$CAUploadSessionStatus9(l);n.size=m;n.start();};k.prototype.setBatchResult=function(l,m){"use strict";var n=this.$CAUploadSessionStatus9(l),o=m&&!m.error;if(o){this.$CAUploadSessionStatus5+=n.size;n.end();}else{this.$CAUploadSessionStatus6+=n.size;n.end(m?m.error:'no response');}};k.prototype.getNumUploadAttempted=function(){"use strict";return this.$CAUploadSessionStatus4;};k.prototype.getNumUploadSucceeded=function(){"use strict";return this.$CAUploadSessionStatus5;};k.prototype.getNumUploadFailed=function(){"use strict";return this.$CAUploadSessionStatus6;};k.prototype.getSessionID=function(){"use strict";return this.$CAUploadSessionStatus0;};k.prototype.getTotalBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.getCurrentBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.createNewBatch=function(){"use strict";++this.$CAUploadSessionStatus3;this.$CAUploadSessionStatus7[this.$CAUploadSessionStatus3]=new j(this.$CAUploadSessionStatus3);return this;};k.prototype.markLastBatch=function(){"use strict";this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last=true;return this;};k.prototype.noBatchCreated=function(){"use strict";return (this.$CAUploadSessionStatus3===0);};k.prototype.isFirstBatch=function(){"use strict";return (this.$CAUploadSessionStatus3===1);};k.prototype.isLastBatch=function(){"use strict";if(this.$CAUploadSessionStatus3===0)return false;return this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last;};k.prototype.getAPISpecForCurrentBatch=function(){"use strict";return {session_type:i.ACTION_BASED_SESSION,session_id:this.getSessionID(),batch_seq:this.getCurrentBatchID(),last_batch_flag:this.isLastBatch()};};k.prototype.setSessionException=function(l){"use strict";this.$CAUploadSessionStatus8=l;};k.prototype.toObject=function(){"use strict";var l=[],m=0,n=0;for(var o in this.$CAUploadSessionStatus7){var p=this.$CAUploadSessionStatus7[o];if(p.status!==j.SUCCEEDED)l.push(p.toObject());if(p.status===j.SUCCEEDED||p.status===j.FAILED){m+=p.latency;n++;}}var q={local_session_id:this.$CAUploadSessionStatus0,num_batches:this.getTotalBatchID(),time_start_ui:Math.round(this.$CAUploadSessionStatus1/1000),time_upload_ui:Math.round(this.$CAUploadSessionStatus2/1000),num_attempted_ui:this.$CAUploadSessionStatus4,num_succeeded_ui:this.$CAUploadSessionStatus5,num_failed_ui:this.$CAUploadSessionStatus6,batches_detail:JSON.stringify(l),error_msg:this.$CAUploadSessionStatus8};if(n>0)q.avg_batch_latency=Math.round(m/n);return q;};k.prototype.$CAUploadSessionStatus9=function(l){"use strict";h(this.$CAUploadSessionStatus7.hasOwnProperty(l));return this.$CAUploadSessionStatus7[l];};e.exports=k;},null);
__d("CustomAudienceUiLogger",["AsyncRequest"],function(a,b,c,d,e,f,g){var h='/ajax/ads/manage/custom_audience/log/',i={EVENT_UI_SESSION_FINISH:'ui_session_finish',log:function(j){var k=new g(h);k.setData(j||{}).send();}};e.exports=i;},null);
__d("CustomAudienceUploader",["ads-cluster-constants","AdsMigrationOverrides","ArbiterMixin","AudienceTokenProcessor","CustomAudienceBigPostPool","BufferedTokenReader","CAUploadSessionStatus","copyProperties","fbt","invariant","tx","CustomAudienceUiLogger","CustomAudienceSessionTypesJS","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS","WebApiApplication","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=b('ads-cluster-constants').ERROR_THRESHOLD_RATE,y={INIT:"INIT",READING:"READING",FILE_LOADING:"FILE_LOADING",WAITING_FOR_ERROR_CHECK:"WAITING_FOR_ERROR_CHECK",WAITING_FOR_REQUEST:"WAITING_FOR_REQUEST",WAITING_REQUEST_SENT:"WAITING_REQUEST_SENT",STOPPED:"STOPPED",DONE:"DONE"},z=w(i);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da,ea){"use strict";this.dao=da;this.N_UPLOAD_CONCURRENCY=ea;this._clusterReader=null;this._numUploaded=0;this._clusterID=0;this._removeUsers=false;this._encOption=null;this._state=y.INIT;this._uploadSession=new m();this._bigPostPool=new k(ea+2);this._bigPost=this._bigPostPool.acquireBigPost();this._hashType=null;this._requestNumber=0;this._waitingRequest=null;this._currentLineInfo={lineNum:0,numValidTokens:0,firstInvalidToken:null};this._numInvalidLines=0;this._appIDs=null;}ca.prototype.createCluster=function(da,ea,fa){"use strict";this._encOption=fa.encOption;this._uploadType=fa.uploadType;this._accountId=fa.accountId;this._createCluster=true;this._appIDs=fa.appIDs;this.inform(ca.PROGRESS_CREATING_CLUSTER);this._readFile(ea);this._errorLimitCallback=function(){this.dao.add.createCustomAudience.one(function(ga){this._clusterID=ga.id;if(this._state!=y.STOPPED)this._continueAfterFirstBatchCheck();}.bind(this),{migrations_override:h,name:da,accountId:fa.accountId,opt_out_link:fa.optOutLink,rev_share_policy_id:fa.revSharePolicyID,description:fa.description,partner_reference_key:fa.partnerReferenceKey,is_partner_category:!!fa.isPartnerCategory,creation_params:{type:'file',file_name:ea.name},handleError:function(ga,ha){var ia={type:'FatalError',message:ha.error.message};this.inform(ca.FATAL_ERROR,ia);}.bind(this)});}.bind(this);};ca.prototype.modifyUsers=function(da,ea,fa){"use strict";this._accountId=fa.accountId;this._uploadType=fa.uploadType;this._encOption=fa.encOption;this._removeUsers=fa.removeUsers;this._clusterID=da;this._appIDs=fa.appIDs;this._readFile(ea);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ca.prototype.removeUsersFromAllAudiences=function(da,ea){"use strict";this._accountId=ea.accountId;this._uploadType=ea.uploadType;this._encOption=ea.encOption;this._optOut=true;this._readFile(da);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ca.prototype.getNumErrors=function(){"use strict";return this._numInvalidLines;};ca.prototype.getNumUploaded=function(){"use strict";var da=this._uploadSession.getNumUploadSucceeded()-(this._uploadSession.getTotalBatchID()-1);if(da<0)da=0;return da;};ca.prototype.getNumFailed=function(){"use strict";return this._uploadSession.getNumUploadFailed();};ca.prototype.getNumTokens=function(){"use strict";return this._clusterReader.getNumTokens();};ca.prototype.getNumLines=function(){"use strict";return this._clusterReader.getLineNumber();};ca.prototype.getProgress=function(){"use strict";if(this._uploadSession.isSessionCompleted())return 100;return this._clusterReader?this._clusterReader.progress()*100:0;};ca.prototype.stop=function(){"use strict";p(this._state==y.READING||this._state==y.FILE_LOADING||this._state==y.WAITING_FOR_REQUEST||this._state==y.WAITING_FOR_ERROR_CHECK);this._state=y.STOPPED;this._uploadSession.end();this._logToServer(false);this._clusterReader=null;};ca.prototype._continueAfterFirstBatchCheck=function(){"use strict";p(this._state==y.WAITING_FOR_ERROR_CHECK);this.inform(ca.PROGRESS_START_UPLOADING);if(this._waitingRequest){this._sendWaitingRequest();}else this._endUpload();};ca.prototype._handleLine=function(){"use strict";while(true){if(this._state===y.STOPPED)break;p(this._state===y.READING);var da=this._clusterReader.nextToken();if(da===null){this._state=y.FILE_LOADING;break;}if(da==l.EOF){this._mayTriggerTokenErrorEvent();this._endOfFile=true;if(this._bigPost.getUserCount()>0){this._sendRequest();}else if(this._bigPost.getUserCount()===0&&this._uploadSession.noBatchCreated()){this.inform(ca.NO_VALID_ENTRIES);return;}break;}if(this._currentLineInfo.line&&this._clusterReader.getLineNumber()>this._currentLineInfo.line)this._mayTriggerTokenErrorEvent();if(da==='')continue;this._currentLineInfo.line=this._clusterReader.getLineNumber();var ea=this._tokenProcessor.processToken(da,this._bigPost);if(!ea){if(this._currentLineInfo.firstInvalidToken===null)this._currentLineInfo.firstInvalidToken=da;continue;}this._currentLineInfo.numValidTokens++;if(this._bigPost.getUserCount()==g.CLUSTER_API_MAX_SIZE){var fa=!this._sendRequest();this._tokenProcessor.processToken(da,this._bigPost);if(fa)break;}}if(this._state!=y.STOPPED)this.inform(ca.PROGRESS_PARSING);if(this._state==y.WAITING_FOR_ERROR_CHECK)if(this._numInvalidLines/this._clusterReader.getLineNumber()>x){this.inform(ca.ERROR_LIMIT_REACHED,{numErrors:this._numInvalidLines,numLines:this._clusterReader.getLineNumber(),errorRate:this._numInvalidLines/this._clusterReader.getLineNumber(),continueCallback:this._errorLimitCallback});}else this._errorLimitCallback();};ca.prototype._readFile=function(da){"use strict";this._endOfFile=false;this._tokenProcessor=new j(this._uploadType);this._clusterReader=new l(da,10000);this._clusterReader.subscribe(l.DATA_LOADED_EVENT,this._continueReadFile.bind(this));this._uploadSession.start();this._continueReadFile();this.inform(ca.PROGRESS_START_READING);};ca.prototype._continueReadFile=function(){"use strict";if(this._state==y.INIT||this._state==y.FILE_LOADING||this._state==y.WAITING_REQUEST_SENT){this._state=y.READING;try{this._handleLine();}catch(da){this._uploadSession.setSessionException(da.message);this._logToServer(false);throw da;}}};ca.prototype._onTokenError=function(da,ea){"use strict";var fa=this._tokenProcessor.getType(),ga=this._getUploadTypeString(fa);if(this._tokenProcessor.isHash()){fa=g.UPLOAD_TYPE_HASH;ga="hash";}var ha={type:fa,message:q._("line {line} contains {token}",{type:ga,token:da,line:ea}),token:da};this._numInvalidLines++;this.inform(ca.ERROR,ha);};ca.prototype._getUploadTypeString=function(da){"use strict";switch(da){case g.UPLOAD_TYPE_EMAIL:return "email";case g.UPLOAD_TYPE_UID:return "UID";case g.UPLOAD_TYPE_PHONE:return "phone number";case g.UPLOAD_TYPE_PARTNER_TOKEN:return "partner token";case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return "App User ID";case g.UPLOAD_TYPE_MOBILE_ADVERTISER_Id:return "Mobile Advertising ID";}return '';};ca.prototype._sendRequest=function(){"use strict";this._uploadSession.createNewBatch();if(this._endOfFile)this._uploadSession.markLastBatch();p(this._createCluster&&this._uploadSession.isFirstBatch()||this._clusterID||this._optOut);p(this.dao);p(this._state==y.READING);var da=this._bigPost;this._bigPost=this._bigPostPool.acquireBigPost();var ea=da.getUserCount();p(this._endOfFile&&ea>0||ea==g.CLUSTER_API_MAX_SIZE);var fa=this._makeUploadingAPIParams(da);if(this._uploadSession.isFirstBatch()||this._requestNumber>=this.N_UPLOAD_CONCURRENCY){this._waitingRequest=function(){this._callUploadingAPI(da,fa);}.bind(this);this._state=this._uploadSession.isFirstBatch()?y.WAITING_FOR_ERROR_CHECK:y.WAITING_FOR_REQUEST;return false;}this._callUploadingAPI(da,fa);return true;};ca.prototype._requestCallback=function(da){"use strict";return (function(ea){this._uploadSession.setBatchResult(da,ea);this.inform(ca.PROGRESS_UPLOADING);if(!ea||ea.error){var fa="Unknown error";if(ea&&ea.error)fa=ea.error.message;var ga={type:'UploadRequest',message:fa};this.inform(ca.ERROR,ga);}this._requestNumber--;if(this._uploadSession.isSessionCompleted()){this._endUpload();return;}if(this._state==y.WAITING_FOR_REQUEST)this._sendWaitingRequest();}).bind(this);};ca.prototype._sendWaitingRequest=function(){"use strict";p(this._state==y.WAITING_FOR_REQUEST||this._state==y.WAITING_FOR_ERROR_CHECK);var da=this._waitingRequest;this._waitingRequest=null;da();this._state=y.WAITING_REQUEST_SENT;this._continueReadFile();};ca.prototype._makeUploadingAPIParams=function(da){"use strict";if(this._appIDs)da.appendAppIDs(this._appIDs);da.appendPayloadSchema(this._tokenProcessor.getPayloadSchema());var ea=this._uploadSession.getAPISpecForCurrentBatch();ea.estimated_num_total=Math.round((this._uploadSession.getNumUploadAttempted()+da.getUserCount())/this.getProgress()*100);return ea;};ca.prototype._callUploadingAPI=function(da,ea){"use strict";this._requestNumber++;this._uploadSession.startBatch(ea.batch_seq,da.getUserCount());var fa={session:JSON.stringify(ea)};if(this._optOut){da.request('/act_'+this._accountId+'/usersofanyaudience','DELETE',fa,this._requestCallback(this._uploadSession.getCurrentBatchID()));}else da.request('/'+this._clusterID+'/upload',this._removeUsers?'DELETE':'POST',fa,this._requestCallback(this._uploadSession.getCurrentBatchID()));};ca.prototype._endUpload=function(){"use strict";this._state=y.DONE;this._uploadSession.end();this._logToServer(true);this.inform(ca.FINISHED,{audienceId:this._clusterID,sessionId:this._uploadSession.getSessionID()});};ca.prototype._mayTriggerTokenErrorEvent=function(){"use strict";if(this._currentLineInfo.line&&this._currentLineInfo.numValidTokens===0&&this._currentLineInfo.firstInvalidToken)this._onTokenError(this._currentLineInfo.firstInvalidToken,this._currentLineInfo.line);this._currentLineInfo.line=0;this._currentLineInfo.numValidTokens=0;this._currentLineInfo.firstInvalidToken=null;};ca.prototype._logToServer=function(da){"use strict";var ea=this._uploadSession.toObject();ea.app_id=v.getClientID();ea.audience_id=this._clusterID;if(this._accountId)ea.ad_account_id=this._accountId;ea.event_name=r.EVENT_UI_SESSION_FINISH;ea.num_invalid_ui=this._numInvalidLines;ea.num_lines_ui=this._clusterReader.getLineNumber();ea.file_size=this._clusterReader.getFileSize();ea.session_type=s.ACTION_BASED_SESSION;ea.action_type=this._getActionType();ea.payload_schema=this._getPayloadSchema();if(da){ea.upload_progress=100;}else ea.upload_progress=Math.round(this.getProgress()/100*99);r.log(ea);};ca.prototype._getActionType=function(){"use strict";if(this._optOut)return "OPTOUT";if(this._removeUsers)return "REMOVE_USER";return "ADD_USER";};ca.prototype._getPayloadSchema=function(){"use strict";switch(this._uploadType){case g.UPLOAD_TYPE_EMAIL:return t.EMAIL_SHA256;case g.UPLOAD_TYPE_UID:return u.UID;case g.UPLOAD_TYPE_PHONE:return t.PHONE_SHA256;case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return u.THIRD_PARTY_TOKEN;case g.UPLOAD_TYPE_PARTNER_TOKEN:return u.TOKEN;case g.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return u.MOBILE_ADVERTISER_ID;}};n(ca,{PROGRESS_START_READING:'progress_reading',PROGRESS_PARSING:'progress_parsing',PROGRESS_START_UPLOADING:'progress_start_uploading',PROGRESS_UPLOADING:'progress_uploading',PROGRESS_CREATING_CLUSTER:'progress_creating_cluster',NO_VALID_ENTRIES:'no_valid_entries_event',ERROR_LIMIT_REACHED:'error_limit_reached_event',ERROR:'error_event',FATAL_ERROR:'fatal_error_event',FINISHED:'finished_event',STATES:y});e.exports=ca;},null);
__d("AudienceManagerEditDialog.react",["AdsAMDataSourceUtil","AdsAMConstants","AdsCustomAudienceType","AdsProgressBar.react","AudienceManagerMembershipFormMixin.react","AudienceManagerTextInput","AudienceManagerUIConstants","AudienceManagerURLConstants","CustomAudienceUploader","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIDialogCancelButton.react","XUIDialogButton.react","XUISpinner.react","areJSONRepresentationsEqual","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){var fa=t.PropTypes,ga=i.SUBTYPES,ha={INITIAL:1,UPLOADING:2,UPLOAD_COMPLETED:3},ia={ADD:'add',REMOVE:'remove'},ja=t.createClass({displayName:'AudienceManagerEditDialog',mixins:[u,k],propTypes:{accountID:fa.string.isRequired,audience:fa.object.isRequired,dao:fa.object.isRequired,onAudienceChanged:t.PropTypes.func.isRequired,canUploadAppUserID:fa.bool,onClose:fa.func},getInitialState:function(){return {addRemoveMode:ia.ADD,description:this.props.audience.description,name:this.props.audience.name,parseProgress:0,selectedFile:null,selectedDataType:null,shown:true,stage:ha.INITIAL,termsAccepted:true};},componentWillReceiveProps:function(ka){this.setState({name:ka.audience.name,description:ka.audience.description});},render:function(){return t.createElement(t.DOM.span,null);},renderLayers:function(){if(!this.state.shown)return;return {dialog:t.createElement(v,{width:m.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle,shown:true},t.createElement(y,null,t.createElement(t.DOM.span,null,"Edit Audience")),t.createElement(w,null,t.createElement(t.DOM.div,{className:"_5rkr"},t.createElement(p,{className:"_5rkp"},t.createElement(r,null,t.createElement(q,{label:"Name",className:"_5oup"},t.createElement(t.DOM.div,null,t.createElement(l,{value:this.state.name,onChange:this._nameChanged,className:(("_5nsb")+(!this.state.name?' '+"_5nut":''))}),t.createElement(t.DOM.span,{className:((!!this.state.name?"hidden_elem":'')+(' '+"_5nuu"))}))),t.createElement(q,{label:"Description",className:"_5p0n"},t.createElement(l,{isTextArea:true,className:"_5nsb _5nse",value:this.state.description,placeholder:"Add a description of your audience",onChange:this._descriptionChanged})))),this._renderMembershipSectionForDataFileAudience(),this._renderProgressBar())),t.createElement(x,{leftContent:this._renderDialogFooterLeftContent()},this._renderDialogFooterRightContent()))};},_descriptionChanged:function(ka){this.setState({description:ka});},_isCreatedFromFile:function(){if(!this.props.audience.data_source||this.props.audience.subtype!==ga.REGULAR)return false;var ka=this.props.audience.data_source.type;if(ka===g.TYPES.FILE_IMPORTED||ka===g.TYPES.UNKNOWN)return true;},_nameChanged:function(ka){this.setState({name:ka});},_onSaveClick:function(){this._updateMetadata();if(this.state.selectedFile&&this.state.selectedDataType){this.setState({stage:ha.UPLOADING});var ka=new o(this.props.dao,h.FILE_UPLOAD_CONCURRENCY),la={uploadType:this.state.selectedDataType,removeUsers:this.state.addRemoveMode===ia.REMOVE};if(this._isAppIDRequired())la.appIDs=this.state.appIdEntries.map(function(na){return na.getUniqueID();});var ma=[ka.subscribe(o.ERROR_LIMIT_REACHED,function(na,oa){oa.continueCallback();}),ka.subscribe(o.PROGRESS_PARSING,function(){this.setState({parseProgress:ka.getProgress()});}.bind(this)),ka.subscribe(o.FINISHED,function(na,oa){this.setState({parseProgress:100,stage:ha.UPLOAD_COMPLETED});ma.forEach(ka.unsubscribe,ka);}.bind(this))];ka.modifyUsers(this.props.audience.id,this.state.selectedFile,la);}else this._onClose();},_renderMembershipSectionForDataFileAudience:function(){if(this._isCreatedFromFile())return this._renderMembershipSection(this.FORM_TYPE.EDIT,this.props.canUploadAppUserID);},_renderProgressBar:function(){switch(this.state.stage){case ha.UPLOADING:return (t.createElement(t.DOM.div,{className:"_5prd"},t.createElement(j,{className:"_5pre",animated:true,size:"large",value:this.state.parseProgress,label:this.state.addRemoveMode===ia.ADD?"Adding People...":"Removing People..."}),t.createElement(t.DOM.div,{className:"_5prf"},"Once this is complete, it may take up to 30 minutes for your audience to be ready for use. We will notify you when your audience is ready.")));case ha.UPLOAD_COMPLETED:return (t.createElement(t.DOM.div,{className:"_5prd"},t.createElement(j,{className:"_5pre",animated:true,size:"large",value:this.state.parseProgress,label:"Complete!"}),t.createElement(t.DOM.div,{className:"_5prf"},"Once this is complete, it may take up to 30 minutes for your audience to be ready for use. We will notify you when your audience is ready.")));default:return t.createElement(t.DOM.span,null);}},_renderDialogFooterLeftContent:function(){return (t.createElement(t.DOM.div,{className:((this.state.stage!==ha.INITIAL?"hidden_elem":''))},t.createElement(t.DOM.input,{type:"checkbox",checked:this.state.termsAccepted,onChange:this._termsCheckboxChanged},ea._("I agree to the {link}",[ea.param("link",t.createElement(s,{target:"_blank",href:n.CUSTOM_AUDIENCE_TOS},"Facebook Custom Audiences Terms"))]))));},_renderDialogFooterRightContent:function(){switch(this.state.stage){case ha.INITIAL:var ka=!this.state.termsAccepted||!this.state.name||!this._isAppIDTokensValid();return (t.createElement(t.DOM.div,null,t.createElement(aa,{use:"confirm",action:"confirm",onClick:this._onSaveClick,disabled:ka,label:"Save"}),t.createElement(z,{use:"default",action:"close"})));case ha.UPLOADING:return t.createElement(ba,{background:"light",size:"large"});case ha.UPLOAD_COMPLETED:return (t.createElement(aa,{onClick:this._onOkayButtonClick,label:"Okay"}));}},_updateMetadata:function(){var ka={name:this.state.name,description:this.state.description},la=this.props.audience,ma={name:la.name,description:la.description};if(!ca(ka,ma))this.props.onAudienceChanged(this.props.audience,ka);},_termsCheckboxChanged:function(event){this.setState({termsAccepted:event.target.checked});},_addRemoveRadioChanged:function(ka){this.setState({addRemoveMode:ka});},_onOkayButtonClick:function(){this._onClose();},_onCancelClick:function(){this._onClose();},_onToggle:function(){this._onClose();},_onClose:function(){this.props.onClose?this.props.onClose():this.setState({shown:false});}});e.exports=ja;},null);
__d("AdAccountIDSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){var i=null;for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m){"use strict";i;this.$AdAccountIDSearchSource0=m;}l.prototype.searchImpl=function(m,n,o){"use strict";var p=[];if(!m)return;if(!isNaN(m)){this.$AdAccountIDSearchSource0.fetch.validateAccountIDs.one(function(q){if(q[m].valid)p.push(new h({uniqueID:m,title:m}));n(p,m);},{adaccounts:[m]});return;}n(p,m);};l.getInstance=function(m){if(!i)i=new l(m);return i;};e.exports=l;},null);
__d("FreeTextTypeaheadPresenter",["List.react","React","ReactPropTypes","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'ViewRenderer',propTypes:{entries:i.array.isRequired,highlightedEntry:i.object,onSelect:i.func.isRequired,onHighlight:i.func},render:function(){var o=this.props.excludedEntries||{},p=this.props.entries.filter(function(s){return !o[s.getUniqueID()];});if(!p.length)return h.createElement(h.DOM.span,null);var q=p.map(this._renderRow,this),r=k("_5tbq",this.props.className);return (h.createElement(h.DOM.div,{className:r},h.createElement(g,{border:"none",spacing:"none"},q)));},_renderRow:function(o){return (h.createElement(m,{key:o.getUniqueID(),entry:o,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:o===this.props.highlightedEntry}));}}),m=h.createClass({displayName:'EntryRowView',propTypes:{entry:i.object.isRequired,onSelect:i.func.isRequired,onHighlight:i.func,highlighted:i.bool},render:function(){return (h.createElement(h.DOM.li,{className:(("_5tbr")+(this.props.highlighted?' '+"_5tbs":'')),onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter},this.props.entry.getTitle()));},_onMouseDown:function(o){this.props.onSelect(this.props.entry,o);},_onMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.entry);}}),n={ViewRenderer:l,useLayer:true};e.exports=n;},null);
__d("SharedAdAccountCapabilitySelector.react",["CustomAudienceSharingCapabilities","React","XUISelector.react","areEqual","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.USE_FOR_ADS,n=g.USE_FOR_INSIGHTS,o=i.Option,p={TARGETING:1,TARGETING_AND_INSIGHTS:2,UNSHARE:3},q=h.createClass({displayName:'SharedAdAccountCapabilitySelector',propTypes:{adAccountID:h.PropTypes.string.isRequired,capability:h.PropTypes.array.isRequired,description:h.PropTypes.string.isRequired,onUpdateCapability:h.PropTypes.func.isRequired,onRemoveAdAccount:h.PropTypes.func.isRequired},render:function(){var r=p.TARGETING_AND_INSIGHTS;if(j(this.props.capability,[m]))r=p.TARGETING;return (h.createElement(h.DOM.li,{className:"_5tbm"},this.props.description,h.createElement(i,{className:"_z9u",suppressed:true,size:"large",onChange:this._onChange,defaultValue:r},h.createElement(o,{value:p.TARGETING_AND_INSIGHTS},"Targeting and Insights"),h.createElement(o,{value:p.TARGETING},"Targeting Only"),h.createElement(o,{value:p.UNSHARE},"Stop Sharing"))));},_onChange:function(r){switch(r.value){case p.TARGETING:this.props.onUpdateCapability(this.props.adAccountID,[m]);break;case p.TARGETING_AND_INSIGHTS:this.props.onUpdateCapability(this.props.adAccountID,[m,n]);break;case p.UNSHARE:this.props.onRemoveAdAccount(this.props.adAccountID);break;}}});e.exports=q;},null);
__d("AudienceManagerCapabilityTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","SharedAdAccountCapabilitySelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.createClass({displayName:'AudienceManagerCapabilityTokenizer',propTypes:{capabilities:k.PropTypes.object.isRequired,onUpdateAttempt:k.PropTypes.func.isRequired,onSelectAttempt:k.PropTypes.func.isRequired,onRemoveAttempt:k.PropTypes.func.isRequired,dao:k.PropTypes.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var p=i,q={};for(var r in this.props.capabilities)q[r]=true;p.extraRendererProps={excludedEntries:q};return (k.createElement(k.DOM.div,null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:"Enter an Account ID",presenter:p,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(this.props.capabilities.length===0)return null;return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return Object.keys(this.props.capabilities).map(function(p){var q=p;return (k.createElement(l,{key:p,adAccountID:p,capability:this.props.capabilities[p],description:q,onUpdateCapability:this.props.onUpdateAttempt,onRemoveAdAccount:this.props.onRemoveAttempt}));}.bind(this));},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(p){if(p&&this.props.onSelectAttempt)this.props.onSelectAttempt(p.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=o;},null);
__d("AudienceManagerShareAudienceTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.createClass({displayName:'SharedAdAccountItem',propTypes:{adAccountID:k.PropTypes.string.isRequired,onRemoveAdAccount:k.PropTypes.func.isRequired},render:function(){return (k.createElement(k.DOM.li,{className:"_5tbm"},k.createElement(k.DOM.div,{className:"_5tbn"},k.createElement(l,{size:"small",onClick:this._onRemoveAdAccount})),this.props.adAccountID));},_onRemoveAdAccount:function(){this.props.onRemoveAdAccount(this.props.adAccountID);}}),p=k.createClass({displayName:'AudienceManagerShareAudienceTokenizer',propTypes:{selectedAdAccounts:k.PropTypes.array.isRequired,onSelectAttempt:k.PropTypes.func.isRequired,onRemoveAttempt:k.PropTypes.func.isRequired,dao:k.PropTypes.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var q=i,r={};this.props.selectedAdAccounts.forEach(function(s){r[s]=true;});q.extraRendererProps={excludedEntries:r};return (k.createElement(k.DOM.div,null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:"Enter an Account ID",presenter:q,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(!this.props.selectedAdAccounts.length)return k.createElement(k.DOM.span,null);return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return this.props.selectedAdAccounts.map(function(q){var r=q+"";return (k.createElement(o,{key:r,adAccountID:r,onRemoveAdAccount:this.props.onRemoveAttempt}));},this);},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(q){if(q&&this.props.onSelectAttempt)this.props.onSelectAttempt(q.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=p;},null);
__d("AudienceManagerShareDialog.react",["AdsAMViewActions","AudienceManagerCapabilityTokenizer.react","AudienceManagerShareAudienceTokenizer.react","AudienceManagerUIConstants","CustomAudienceSharingCapabilities","React","InfoTable.react","InfoTableRow.react","InfoTableSection.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","adsGKCheck","areEqual","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=k.USE_FOR_ADS,ca=k.USE_FOR_INSIGHTS,da=l.createClass({displayName:'AudienceManagerShareDialog',propTypes:{audience:l.PropTypes.object.isRequired,dao:l.PropTypes.object.isRequired,onUpdateAudienceCapabilities:l.PropTypes.func.isRequired},getInitialState:function(){return {newCapabilities:{},loading:true};},componentWillMount:function(){this.props.dao.fetch.capabilitiesForAudience.clearCache();this.props.dao.fetch.capabilitiesForAudience.one(function(ea){var fa=ea[0].capabilities;if(fa.length===0)fa={};this.setState({originalCapabilities:fa,newCapabilities:y({},fa),loading:false});}.bind(this),{audienceId:this.props.audience.id});},render:function(){return (l.createElement(p,{shown:true,width:j.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},l.createElement(u,null,l.createElement(l.DOM.span,null,aa._("Share {audience name}",[aa.param("audience name",this.props.audience.name)]))),l.createElement(q,null,l.createElement(l.DOM.div,{className:"_5rkr"},this._renderDialogBody())),l.createElement(s,null,l.createElement(r,{use:"default",action:"close",onClick:this._onCancelClick}),l.createElement(t,{disabled:this.state.loading,use:"confirm",action:"confirm",label:"Update",onClick:this._onUpdateButtonClick}))));},_renderDialogBody:function(){if(this.state.loading){return (l.createElement(l.DOM.div,{className:"_5saq"},l.createElement(l.DOM.p,null,"Please wait while we find the shared accounts..."),l.createElement(v,{size:"large"})));}else return (l.createElement(l.DOM.div,null,this._renderDescriptionByGK(),l.createElement(m,{className:"_4x0p"},l.createElement(o,null,l.createElement(n,{label:"Account IDs",type:"data"},this._renderTokenizer())))));},_renderDescriptionByGK:function(){if(!w('audience_insights_v1'))return (l.createElement(l.DOM.div,null,l.createElement(l.DOM.p,null,"Enter an ad account ID to give them permission to target ads for this audience. They will not be able to edit or share your audience.")));return (l.createElement(l.DOM.p,null,"Enter an ad account ID to give them permission to target ads and see insights for this audience. They will not be able to edit or share your audience."));},_renderTokenizer:function(){if(!w('audience_insights_v1')){var ea=Object.keys(this.state.newCapabilities);return (l.createElement(l.DOM.div,null,l.createElement(i,{selectedAdAccounts:ea,onSelectAttempt:this._onAddAdAccountAttempt,onRemoveAttempt:this._onRemoveAdAccountAttempt,dao:this.props.dao})));}return (l.createElement(l.DOM.div,null,l.createElement(h,{capabilities:this.state.newCapabilities,dao:this.props.dao,onRemoveAttempt:this._onRemoveAdAccountAttempt,onSelectAttempt:this._onAddAdAccountAttempt,onUpdateAttempt:this._onUpdateCapabilityAttempt})));},_onUpdateButtonClick:function(){var ea=this.state.originalCapabilities,fa=this.state.newCapabilities,ga={},ha=[];for(var ia in ea)if(!fa[ia]){ha.push(ia);}else if(!x(ea[ia],fa))ga[ia]=fa[ia];for(var ja in fa)if(!ea[ja])ga[ja]=fa[ja];this.props.onUpdateAudienceCapabilities(this.props.audience.id,ga,ha);g.closeShareAudienceDialog();},_onAddAdAccountAttempt:function(ea){var fa=this.state.newCapabilities;if(!w('audience_insights_v1')){fa[ea]=[ba];}else fa[ea]=[ba,ca];this.setState({newCapabilities:fa});},_onRemoveAdAccountAttempt:function(ea){var fa=this.state.newCapabilities;delete fa[ea];this.setState({newCapabilities:fa});},_onUpdateCapabilityAttempt:function(ea,fa){var ga=this.state.newCapabilities;ga[ea]=fa;this.setState({newCapabilities:ga});},_onToggle:function(){g.closeShareAudienceDialog();},_onCancelClick:function(){g.closeShareAudienceDialog();}});e.exports=da;},null);
__d("AdsPixelDetails.react",["AdsPixelCode.react","AdsPixelInsights.react","React","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:'AdsPixelDetails',propTypes:{pixel:i.PropTypes.object.isRequired,dao:i.PropTypes.object.isRequired,width:i.PropTypes.number.isRequired,height:i.PropTypes.number.isRequired,onSendEmailLinkClick:i.PropTypes.func.isRequired,message:i.PropTypes.string},render:function(){return (i.createElement(i.DOM.div,null,this._renderPixelInsights(),this._renderPixelCode()));},_renderPixelCode:function(){return (i.createElement(i.DOM.div,null,i.createElement(i.DOM.div,{className:"_5kka"},"Pixel Code"),i.createElement(i.DOM.div,{className:"_5kkb"},this._renderMessage(),i.createElement(g,{pixel:this.props.pixel,onSendEmailLinkClick:this.props.onSendEmailLinkClick,ref:"AdsPixelCode"}))));},_renderPixelInsights:function(){return (i.createElement(i.DOM.div,{className:"_5kkh"},i.createElement(i.DOM.div,{className:"_5kka"},"Pixel Events"),i.createElement(i.DOM.div,null,i.createElement(h,{pixelId:this.props.pixel.id,dao:this.props.dao,height:this.props.height,width:this.props.width}))));},_renderMessage:function(){if(!this.props.message)return;return (i.createElement(j,{use:"notify",className:"_13e0"},this.props.message));}});e.exports=m;},null);
__d("AudienceManagerViewPixelDialogViewStateEnum",[],function(a,b,c,d,e,f){var g={VIEW_PIXEL:'view_pixel',SEND_EMAIL:'send_email'};e.exports=g;},null);
__d("AudienceManagerViewPixelDialog.react",["AdsAMViewActions","AdsPixelDetails.react","AudienceManagerUIConstants","React","AudienceManagerViewPixelDialogViewStateEnum","WebsiteCustomAudienceLoadingDialog.react","WebsiteCustomAudienceSendPixelByMailDialog.react","XUIDialog.react","XUIDialogBody.react","XUIDialogOkayButton.react","XUIDialogFooter.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=j.PropTypes,v=j.createClass({displayName:'AudienceManagerViewPixelDialog',propTypes:{accountID:u.string.isRequired,dao:u.object.isRequired},getInitialState:function(){return {pixel:null,viewState:k.VIEW_PIXEL,enableSendEmailButton:false,message:null};},componentWillMount:function(){this.props.dao.fetch.adsPixelsForAccount.one(function(w){if(w.length>0){var x=w[0];this.setState({pixel:x});}}.bind(this),{accountId:this.props.accountID});},render:function(){return (j.createElement(n,{onToggle:this._onToggle,shown:true,width:i.DEFAULT_DIALOG_WIDTH},this._renderBody()));},_renderBody:function(){if(!this.state.pixel)return j.createElement(l,null);switch(this.state.viewState){case k.VIEW_PIXEL:return this._getPixelDetails();case k.SEND_EMAIL:return this._getSendEmailBody();}},_getPixelDetails:function(){return (j.createElement(j.DOM.div,null,j.createElement(r,null,"Pixel Details"),j.createElement(o,null,j.createElement(j.DOM.div,{className:"_5rkr"},j.createElement(h,{pixel:this.state.pixel,dao:this.props.dao,onSendEmailLinkClick:function(){this.setState({viewState:k.SEND_EMAIL});}.bind(this),height:200,width:500,message:this.state.message}))),j.createElement(q,null,j.createElement(p,{use:"confirm",action:"cancel"}))));},_getSendEmailBody:function(){return (j.createElement(m,{pixel:this.state.pixel,onCancel:function(){return this.setState({viewState:k.VIEW_PIXEL});}.bind(this),onSendComplete:function(w,x){this.setState({message:w,viewState:k.VIEW_PIXEL});}.bind(this)}));},_onToggle:function(){g.closePixelDialog();}});e.exports=v;},null);
__d("AudienceManagerStages",[],function(a,b,c,d,e,f){e.exports={IDLE:1,PROCESSING:2,ERROR:3};},null);
__d("AudienceManagerTransactionDialog.react",["AudienceManagerStages","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUINotice.react","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.PropTypes,p=h.createClass({displayName:'AudienceManagerTransactionDialog',mixins:[i],propTypes:{error:o.object,stage:o.number.isRequired,onCancelError:o.func.isRequired},render:function(){return h.createElement(h.DOM.span,null);},renderLayers:function(){var q=(this.props.stage===g.PROCESSING||this.props.stage===g.ERROR);return {dialog:h.createElement(j,{shown:q,width:600,onToggle:this._onToggle},h.createElement(k,null,this._renderDialogBody()))};},_renderDialogBody:function(){switch(this.props.stage){case g.PROCESSING:return (h.createElement(h.DOM.div,{className:"_5oe3"},h.createElement(m,{background:"light",size:"large"})));case g.ERROR:return (h.createElement(h.DOM.div,{className:"_5oe3"},h.createElement(l,{use:"warn",onDismiss:this._onToggle.bind(this,false)},this.props.error.message)));default:return h.createElement(h.DOM.span,null);}},_onToggle:function(q){if(!q)this.props.onCancelError&&this.props.onCancelError();}});e.exports=p;},null);
__d("AdsAudienceDeliveryStatusUtils",["fbt","CustomAudienceDeliveryStatus"],function(a,b,c,d,e,f,g,h){var i={};i[h.ACTIVE]="Ready";i[h.INACTIVE]="Not Ready";var j=function(n){return i[n]?i[n]:"Error";},k=function(n){return n!==h.ACTIVE&&n!==h.INACTIVE;},l=function(n){return n===h.ACTIVE;},m=function(n){return n===h.INACTIVE;};e.exports={textByStatus:j,isError:k,isActive:l,isInactive:m};},null);
__d("AudienceManagerAdvertiseColumnCellRenderer",["AdsAudienceDeliveryStatusUtils","React","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.PropTypes,m=h.createClass({displayName:'AudienceManagerAdvertiseColumnCellRenderer',propTypes:{audience:l.object.isRequired,onCreateAdClick:l.func.isRequired},render:function(){var n=this.props.audience.delivery_status.code;if(!g.isActive(n))return h.createElement(h.DOM.div,null,"--");var o="Create Ad";return (h.createElement(h.DOM.div,{className:"_5l8c"},h.createElement(i,{label:o,use:"default",size:"small",className:"_5lg4",onClick:this.props.onCreateAdClick.bind(null,this.props.audience)})));}});e.exports=m;},null);
__d("AudienceManagerDataSourceColumnCellRenderer.react",["React","cx","fbt","AdsAMDataSourceUtil"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l=g.createClass({displayName:'AudienceManagerDataSourceColumnCellRenderer',propTypes:{audience:k.object.isRequired},render:function(){var m=this.props.audience.data_source,n='';switch(m.type){case j.TYPES.THIRD_PARTY_IMPORTED:case j.TYPES.EVENT_BASED:n=j.textBySubType(m.sub_type);break;default:n=j.textByType(m.type);}var o=m.type===j.TYPES.SEED_BASED?'':"Custom Audience";return (g.createElement(g.DOM.div,{className:"_5no0"},g.createElement(g.DOM.div,{className:"_5no1"},n),g.createElement(g.DOM.div,{className:"_5no2"},o)));}});e.exports=l;},null);
__d("AudienceManagerAppRemarketingOperatorConfig",[],function(a,b,c,d,e,f){var g=[{value:'eq',text:'is equal to'},{value:'neq',text:'is not equal to'},{value:'lt',text:'is less than'},{value:'gt',text:'is greater than'},{value:'gte',text:'is greater than or equals'},{value:'lte',text:'is less than or equals'},{value:'is_any',text:'is any of'},{value:'is_not_any',text:'is not any of'},{value:'contains',text:'contains substring'},{value:'not_contains',text:'does not contain substring'}];f.operators=g;f.labels={eq:'=',neq:'!=',lt:'<',gt:'>',gte:'>=',lte:'<=',is_any:'any',is_not_any:'not any',contains:'cont.',not_contains:'not cont.'};f.isNumeric={lt:true,gt:true,gte:true,lte:true};f.isArray={is_any:true,is_not_any:true};f.getLabelForOperator=function(h){for(var i=0;i<g.length;++i)if(g[i].value===h)return g[i].text;};f.defaultValue='eq';},null);
__d("MobileAppCombinationRuleDescriptionView.react",["AudienceManagerAppRemarketingOperatorConfig","BonsaiText","LoadingIndicator.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j.createClass({displayName:'MobileAppCombinationRuleDescriptionView',propTypes:{audience:j.PropTypes.object.isRequired,dao:j.PropTypes.object.isRequired},getInitialState:function(){return {dataReady:false,appInfo:null};},componentDidMount:function(){this._updateAppInfo(this.props);},componentWillReceiveProps:function(n){this._updateAppInfo(n);},render:function(){if(!this.state.dataReady)return j.createElement(i,{size:"small",color:"blue"});var n=this.props.audience,o=[],p=[];if(n.included_custom_audiences){n.included_custom_audiences.forEach(function(q){o.push(this._renderSubAudience(q,true));}.bind(this));}else o.push(this._renderSubAudience(n,true));if(n.excluded_custom_audiences)n.excluded_custom_audiences.forEach(function(q){p.push(this._renderSubAudience(q,false));}.bind(this));return (j.createElement(j.DOM.div,null,j.createElement(j.DOM.div,null,l._("From application: {appName}",[l.param("appName",j.createElement(j.DOM.span,{className:"_5wb_"},this.state.appInfo.name))])),o,p));},_renderSubAudience:function(n,o){var p=n.retention_days,q=this._decodeRule(n.rule),r=this.state.appInfo.events_for_remarketing?this.state.appInfo.events_for_remarketing[q._eventName]:{},s=r.segments||{},t=r.displayName||q._eventName,u=o?l._("Action taken: {action name}",[l.param("action name",j.createElement(j.DOM.span,{className:"_5wb_"},t))]):l._("Action not taken: {action name}",[l.param("action name",j.createElement(j.DOM.span,{className:"_5wb_"},t))]),v=[];this._extractParameters(v,q);var w='';if(!p){w='';}else if(p===1){w="Over the last 24 hours.";}else w=l._("Over the last {retention_days} days.",[l.param("retention_days",p)]);return (j.createElement(j.DOM.div,{className:"mtm",key:'subAudience_'+o},j.createElement(j.DOM.div,null,u),j.createElement(j.DOM.ul,{className:"_5o5f"},v.map(function(x){var y=s[x.key]||{},z=y.name||x.key;return (j.createElement(j.DOM.li,{key:x.key},z,' ',x.label,' ',x.value));})),this._getCumulativeRuleSentence(q),this._getClientFilters(q),j.createElement(j.DOM.div,null,w)));},_decodeRule:function(n){return JSON.parse(n.replace(/'/g,'"'));},_updateAppInfo:function(n){var o;if(n.audience.included_custom_audiences){o=n.audience.included_custom_audiences[0].rule;}else o=n.audience.rule;var p=this._decodeRule(o)._application;this.props.dao.fetch.objectByFBID.one(function(q){this.setState({dataReady:true,appInfo:q});}.bind(this),{fbid:p,fields:['name','events_for_remarketing']});this.setState(this.getInitialState());},_extractParameters:function(n,o){if(Array.isArray(o)){o.forEach(this._extractParameters.bind(this,n));return;}Object.keys(o).forEach(function(p){if(p==='and'){n=n.concat(this._extractParameters(n,o[p]));return;}else if(p==='_cumulativeRule'){return;}else if(p==='_clientFilters')return;var q=o[p];if(typeof q!=='object')return;var r=Object.keys(q)[0],s=q[r];if(Array.isArray(s))s=s.join(', ');n.push({key:p,value:s,label:g.getLabelForOperator(r)});},this);},_getCumulativeRuleSentence:function(n){if(!n._cumulativeRule)return null;var o=null,p=100-n._cumulativeRule.technique.lower_bound;if(n._cumulativeRule.metric==='count'){o=l._("Top {percentage} by actions taken",[l.param("percentage",p+'%')]);}else if(n._eventName==='fb_mobile_purchase'){o=l._("Top {percentage} by money spent",[l.param("percentage",p+'%')]);}else o=l._("Top {percentage} by action value",[l.param("percentage",p+'%')]);return (j.createElement(j.DOM.div,null,o));},_getClientFilters:function(n){if(!n._clientFilters)return null;var o=n._clientFilters.map(function(p){return h.breakdown.client[p];});return (j.createElement(j.DOM.div,null,"Platforms:",' ',o.join(', ')));}});e.exports=m;},null);
__d("AudienceManagerContextualHelpDialog.react",["AdsAudienceDeliveryStatusUtils","AdsAMDataSourceUtil","MobileAppCombinationRuleDescriptionView.react","React","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=m.createIntlNumberFormatter(0),o=j.createClass({displayName:'AudienceManagerContextualHelpDialog',propTypes:{accountID:j.PropTypes.string.isRequired,audience:j.PropTypes.object.isRequired,dao:j.PropTypes.object.isRequired},render:function(){var p=this.props.audience,q=this.props.audience.description,r=g.isActive(p.delivery_status.code)?n(p.approximate_count):'--';return (j.createElement(j.DOM.div,{className:"_5o5e"},j.createElement(j.DOM.div,null,j.createElement(j.DOM.span,{className:"fwb mrs fsxl"},r),"people"),j.createElement(j.DOM.div,{className:((!q?"hidden_elem":'')+(' '+"mtm"))},j.createElement(j.DOM.span,{className:"fwb"},"Description:"),' '+q),this._renderSharingInfo(),this._renderAuxiliaryInfo()));},_renderSharingInfo:function(){if(this.props.audience.account_id==this.props.accountID)return null;var p="Targeting Only";if(this.props.audience.permission_for_actions.can_see_insight)p="Targeting and Insights";return (j.createElement(j.DOM.div,null,j.createElement(j.DOM.div,{className:"mtm"},j.createElement(j.DOM.span,{className:"fwb"},"Shared By:"),' '+this.props.audience.account_id),j.createElement(j.DOM.div,{className:"mtm"},j.createElement(j.DOM.span,{className:"fwb"},"Permissions:"),' '+p)));},_renderAuxiliaryInfo:function(){var p=this.props.audience,q=p.data_source,r=q.sub_type,s='';if(r!=h.SUBTYPES.MOBILE_APP_EVENTS)s=h.detailOfAudience(p);var t=this._renderHelpLines();return (j.createElement(j.DOM.div,null,j.createElement(j.DOM.div,{className:(("mtm")+(!s?' '+"hidden_elem":''))},j.createElement(j.DOM.span,{className:"fwb"},"From:"),' '+s),j.createElement(j.DOM.div,{className:(("mtm")+(!t?' '+"hidden_elem":''))},t)));},_renderHelpLines:function(){var p=this.props.audience,q=p.data_source||{};switch(q.sub_type){case h.SUBTYPES.MOBILE_APP_EVENTS:case h.SUBTYPES.MOBILE_APP_COMBINATION_EVENTS:return (j.createElement(i,{audience:p,dao:this.props.dao}));}}});e.exports=o;},null);
__d("AudienceManagerDeleteButton.react",["AdsAMViewActions","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k('/images/ads/audience_manager/x-out.png'),m=k('/images/ads/audience_manager/x-out_hover.png'),n=k('/images/ads/audience_manager/x-out_disable.png'),o=i.PropTypes,p=i.createClass({displayName:'AudienceManagerDeleteButton',propTypes:{audience:o.object.isRequired,addTooltipCallback:i.PropTypes.func},getInitialState:function(){return {iconImage:l};},render:function(){if(!this.props.audience.permission_for_actions.can_edit)return (i.createElement(i.DOM.span,{className:"_5nil"},i.createElement(h,{src:n})));return (i.createElement(i.DOM.span,{className:"_5nil",onClick:this._deleteClicked,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement(h,{src:this.state.iconImage})));},componentDidMount:function(){if(this.props.addTooltipCallback)this.props.addTooltipCallback(this.props.audience.permission_for_actions.can_edit);},_onMouseEnter:function(){this.setState({iconImage:m});},_onMouseLeave:function(){this.setState({iconImage:l});},_deleteClicked:function(){g.showDeleteAudienceDialog(this.props.audience.id);}});e.exports=p;},null);
__d("AudienceManagerEditButton.react",["AdsAMDataSourceUtil","AdsAMViewActions","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l('/images/ads/audience_manager/edit.png'),n=l('/images/ads/audience_manager/edit_hover.png'),o=l('/images/ads/audience_manager/edit_disable.png'),p=j.createClass({displayName:'AudienceManagerEditButton',propTypes:{accountID:j.PropTypes.string.isRequired,audience:j.PropTypes.object.isRequired,dao:j.PropTypes.object.isRequired,onAudienceChanged:j.PropTypes.func.isRequired,addTooltipCallback:j.PropTypes.func},getInitialState:function(){return {iconImage:m};},render:function(){if(!this.props.audience.permission_for_actions.can_edit)return (j.createElement(j.DOM.span,{className:"_5lfi"},j.createElement(i,{src:o})));return (j.createElement(j.DOM.span,{className:"_5lfi",onClick:this._editClicked,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},j.createElement(i,{src:this.state.iconImage})));},componentDidMount:function(){if(this.props.addTooltipCallback)this.props.addTooltipCallback(this.props.audience.permission_for_actions.can_edit);},_editClicked:function(){if(this.props.audience.data_source.sub_type===g.SUBTYPES.WEB_PIXEL_HITS||this.props.audience.data_source.sub_type===g.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS){h.showWCADialog(this.props.audience.id);}else h.showRegularEditDialog(this.props.audience.id);},_onMouseEnter:function(){this.setState({iconImage:n});},_onMouseLeave:function(){this.setState({iconImage:m});}});e.exports=p;},null);
__d("AudienceManagerShareButton.react",["AdsAMViewActions","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k('/images/ads/audience_manager/share.png'),m=k('/images/ads/audience_manager/share_hover.png'),n=k('/images/ads/audience_manager/share_disable.png'),o=i.createClass({displayName:'AudienceManagerShareButton',propTypes:{audience:i.PropTypes.object.isRequired,addTooltipCallback:i.PropTypes.func},getInitialState:function(){return {iconImage:l};},render:function(){if(!this.props.audience.permission_for_actions.can_share)return i.createElement(i.DOM.span,null);if(!this.props.audience.permission_for_actions.can_edit)return (i.createElement(i.DOM.span,{className:"_5t6w"},i.createElement(h,{src:n})));return (i.createElement(i.DOM.span,{className:"_5t6w",onClick:this._onIconClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement(h,{src:this.state.iconImage})));},componentDidMount:function(){if(this.props.addTooltipCallback)this.props.addTooltipCallback(this.props.audience.permission_for_actions.can_edit);},_onIconClick:function(){g.showShareAudienceDialog(this.props.audience.id);},_onMouseEnter:function(){this.setState({iconImage:m});},_onMouseLeave:function(){this.setState({iconImage:l});}});e.exports=o;},null);
__d("AudienceManagerViewPixelButton.react",["AdsAMDataSourceUtil","AdsAMViewActions","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=l('/images/ads/audience_manager/pixeldetails.png'),n=l('/images/ads/audience_manager/pixeldetailshover.png'),o=j.PropTypes,p=j.createClass({displayName:'AudienceManagerViewPixelButton',propTypes:{accountID:o.string.isRequired,audience:o.object.isRequired,addTooltipCallback:j.PropTypes.func},getInitialState:function(){return {iconImage:m};},render:function(){if((this.props.audience.data_source.sub_type!==g.SUBTYPES.WEB_PIXEL_HITS&&this.props.audience.data_source.sub_type!==g.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS)||this.props.accountID!=this.props.audience.account_id)return j.createElement(j.DOM.span,null);return (j.createElement(j.DOM.span,{className:"_3z13",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,onClick:this._onViewPixelClicked},j.createElement(i,{src:this.state.iconImage})));},componentDidMount:function(){if(this.props.addTooltipCallback)this.props.addTooltipCallback();},_onViewPixelClicked:function(){h.showPixelDialog();},_onMouseEnter:function(){this.setState({iconImage:n});},_onMouseLeave:function(){this.setState({iconImage:m});}});e.exports=p;},null);
__d("AudienceManagerLookalikeButton.react",["AdsAMViewActions","Image.react","React","adsGKCheck","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:'AudienceManagerLookalikeButton',propTypes:{audienceId:i.PropTypes.string.isRequired},render:function(){if(!j('audience_manager_selectable_table'))return i.createElement(i.DOM.span,null);return (i.createElement(i.DOM.span,{className:"_u8-",onClick:this._onIconClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement(h,{src:l('/images/icons/create_lookalike.png')})));},_onIconClick:function(){g.showLookalikeDialog(this.props.audienceId);}});e.exports=m;},null);
__d("AudienceManagerNameColumnCellRenderer",["AudienceManagerContextualHelpDialog.react","AudienceManagerDeleteButton.react","AudienceManagerEditButton.react","AudienceManagerShareButton.react","AudienceManagerViewPixelButton.react","AudienceManagerLookalikeButton.react","AudienceManagerUIConstants","LayerHideOnBlur","Link.react","React","ReactLayeredComponentMixin","Tooltip","URI","XUIContextualDialog.react","adsGKCheck","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=function(aa){var ba=new s('/ads/audience/');ba.addQueryData({audience_id:aa.id,act:aa.account_id});return ba;},y=p.PropTypes,z=p.createClass({displayName:'AudienceManagerNameColumnCellRenderer',mixins:[q],propTypes:{accountID:y.string.isRequired,audience:y.object.isRequired,dao:y.object.isRequired,onAudienceChanged:y.func.isRequired},getInitialState:function(){return {showHelpDialog:false};},render:function(){var aa=this.props.audience,ba=aa.description||'',ca=ba.substring(0,80)+(ba.length>80?'...':''),da=null;if(u('ads_audience_permlink')){da=p.createElement(o,{target:"_blank",href:x(aa)},aa.name);}else da=p.createElement(p.DOM.span,null,aa.name);return (p.createElement(p.DOM.div,{className:"_5l5z"},p.createElement(p.DOM.table,{className:"_5nim"},p.createElement(p.DOM.tr,null,p.createElement(p.DOM.td,null,p.createElement(p.DOM.div,{ref:"nameAndSubtext",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,className:"_5nin"},p.createElement(p.DOM.div,{className:"_5l5-"},da),p.createElement(p.DOM.div,{className:"_5l5_"},ca))),p.createElement(p.DOM.td,{className:"_5l86"},p.createElement(k,{accountID:this.props.accountID,audience:aa,addTooltipCallback:this._addViewPixelTooltip,ref:"pixelButton"}),p.createElement(l,{audienceId:aa.id}),p.createElement(i,{accountID:this.props.accountID,ref:"editButton",audience:aa,dao:this.props.dao,onAudienceChanged:this.props.onAudienceChanged,addTooltipCallback:this._addEditTooltip}),p.createElement(j,{ref:"shareButton",audience:aa,addTooltipCallback:this._addShareTooltip}),p.createElement(h,{ref:"deleteButton",audience:aa,addTooltipCallback:this._addDeleteTooltip}))))));},renderLayers:function(){return {helpDialog:(p.createElement(t,{width:t.WIDTH.NORMAL,position:"right",alignment:"center",contextRef:"nameAndSubtext",shown:this.state.showHelpDialog,behaviors:{LayerHideOnBlur:n}},p.createElement(p.DOM.div,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},p.createElement(g,{accountID:this.props.accountID,audience:this.props.audience,dao:this.props.dao}))))};},_addViewPixelTooltip:function(){r.set(this.refs.pixelButton.getDOMNode(),"Pixel Details");},_addEditTooltip:function(aa){if(aa){r.set(this.refs.editButton.getDOMNode(),"Edit");}else r.set(this.refs.editButton.getDOMNode(),"You can't edit an audience that was shared with you");},_addShareTooltip:function(aa){if(aa){r.set(this.refs.shareButton.getDOMNode(),"Share");}else r.set(this.refs.shareButton.getDOMNode(),"You can't share an audience that was shared with you");},_addDeleteTooltip:function(aa){if(aa){r.set(this.refs.deleteButton.getDOMNode(),"Delete");}else r.set(this.refs.deleteButton.getDOMNode(),"You can't delete an audience that was shared with you");},componentWillUnmount:function(){clearTimeout(this._lingerTimeout);},_onMouseEnter:function(){clearTimeout(this._lingerTimeout);this.setState({showHelpDialog:true});},_onMouseLeave:function(){clearTimeout(this._lingerTimeout);this._lingerTimeout=setTimeout(this.setState.bind(this,{showHelpDialog:false}),m.HELP_DIALOG_LINGER_TS);}});e.exports=z;},null);
__d("AdsAudienceOperationStatusUtils",["fbt","CustomAudienceOperationStatus"],function(a,b,c,d,e,f,g,h){var i=function(n){return Math.floor(n/100)===Math.floor(h.ERROR/100);},j=function(n){return Math.floor(n/100)===Math.floor(h.WARNING/100);},k=function(n){return n===h.NORMAL||n===h.NO_STATUS;},l=function(n){return n===h.REFRESH_FAIL_SOURCE_DELETED;},m=function(n){switch(n){case h.WARNING:return ("Warning");case h.NO_UPLOAD:return ("File not uploaded");case h.LOW_MATCH_RATE:return ("Low match rate");case h.HIGH_INVALID_RATE:return ("High invalidation rate");case h.ERROR:return ("Error");case h.PIXEL_UNVERIFIED:return ("Pixel not installed");case h.PIXEL_NOT_FIRING:return ("Pixel not active");case h.LEGACY_PIXEL:return ("Migration required");case h.BUILD_FAIL_SOURCE_DELETED:case h.BUILD_FAIL_UNKNOWN:return ("Audience not created");case h.BUILD_RETRYING:return ("Creating audience");default:return ("Unknown issues");}};e.exports={isNormal:k,isError:i,isWarning:j,useLastUpdateTime:l,getProblemShortDesc:m};},null);
__d("AudienceManagerStatusFlyoutDialog.react",["AdsAMViewActions","AdsAMDataSourceUtil","AdsAudienceDeliveryStatusUtils","AdsAudienceOperationStatusUtils","CustomAudienceOperationStatus","Link.react","React","AsyncRequest","adsGKCheck","arrayContains","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=[k.NO_UPLOAD,k.LOW_MATCH_RATE,k.HIGH_INVALID_RATE,k.PIXEL_UNVERIFIED,k.PIXEL_NOT_FIRING],t=m.createClass({displayName:'AudienceManagerStatusFlyoutDialog',propTypes:{accountID:m.PropTypes.string.isRequired,audience:m.PropTypes.object.isRequired},render:function(){return (m.createElement(m.DOM.div,{className:"_2f6l"},m.createElement(m.DOM.div,null,this._getIssueDescription()),this._getActionLink(),this._renderHelpLink()));},_getIssueDescription:function(){var u=this.props.audience.operation_status.code;if(i.isError(this.props.audience.delivery_status.code)||j.isNormal(u))return this.props.audience.delivery_status.description;return this.props.audience.operation_status.description;},_getActionLink:function(){var u=this.props.audience.data_source.sub_type;if(!this._hasActionForDataSourceSubtype(u))return;if(!this.props.audience.permission_for_actions.can_edit)return;if(p(s,this.props.audience.operation_status.code))return (m.createElement(m.DOM.div,{className:"mtm"},m.createElement(l,{onClick:this._onActionLinkClicked},this._getActionLinkText())));},_renderHelpLink:function(){if(!o('smb_custom_audiences_error_audience'))return;if(i.isInactive(this.props.audience.delivery_status.code))return (m.createElement(m.DOM.div,null,m.createElement(m.DOM.div,{className:"mtm"},"Need help with your audience? Get free one-on-one help from a Facebook Ads expert."),m.createElement(m.DOM.div,{className:"mtm"},m.createElement(l,{onClick:this._onHelpClicked},"Schedule a Call"))));},_hasActionForDataSourceSubtype:function(u){switch(u){case h.SUBTYPES.COPY_PASTE_EMAIL_HASHES:case h.SUBTYPES.MAIL_CHIMP_EMAIL_HASHES:return false;}return true;},_getActionLinkText:function(){switch(this.props.audience.operation_status.code){case k.PIXEL_UNVERIFIED:case k.PIXEL_NOT_FIRING:return ("View Pixel Details");case k.NO_UPLOAD:case k.LOW_MATCH_RATE:case k.HIGH_INVALID_RATE:return ("Upload Data File");}},_onActionLinkClicked:function(){switch(this.props.audience.operation_status.code){case k.PIXEL_UNVERIFIED:case k.PIXEL_NOT_FIRING:g.showPixelDialog();break;case k.NO_UPLOAD:case k.LOW_MATCH_RATE:case k.HIGH_INVALID_RATE:g.showRegularEditDialog(this.props.audience.id);break;}},_onHelpClicked:function(){new n().setURI('/ajax/help/contact/1467700436821724').send();}});e.exports=t;},null);
__d("AudienceManagerStatusColumnRenderer.react",["AdsAudienceDeliveryStatusUtils","AdsAudienceOperationStatusUtils","AudienceManagerStatusFlyoutDialog.react","AudienceManagerUIConstants","CustomAudienceOperationStatus","Image.react","InlineBlock.react","LayerHideOnBlur","React","ReactLayeredComponentMixin","XUISpinner.react","XUIContextualDialog.react","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=o.PropTypes,w=o.createClass({displayName:'AudienceManagerStatusColumnRenderer',mixins:[p],propTypes:{accountID:o.PropTypes.string.isRequired,audience:o.PropTypes.object.isRequired,loading:v.bool},getInitialState:function(){return {showHelpDialog:false};},render:function(){if(this.props.loading)return (o.createElement(o.DOM.div,null,o.createElement(q,{background:"light",size:"small"})));return (o.createElement(o.DOM.div,null,o.createElement(o.DOM.div,null,this._getFormattedDeliveryStatus()),o.createElement(m,{ref:"statusAndSubtext",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement(o.DOM.div,{className:"_5cj1"},this._getOperationStatusIcon(),this._getSubText()))));},renderLayers:function(){if(!this.state.showHelpDialog)return null;return {helpDialog:(o.createElement(r,{width:r.WIDTH.NORMAL,position:"left",alignment:"center",contextRef:"statusAndSubtext",shown:true,behaviors:{LayerHideOnBlur:n}},o.createElement(o.DOM.div,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},o.createElement(i,{accountID:this.props.accountID,audience:this.props.audience}))))};},_getDeliveryStatusCode:function(){return this.props.audience.delivery_status.code;},_getOperationStatusCode:function(){return this.props.audience.operation_status.code;},_getFormattedDeliveryStatus:function(){return g.textByStatus(this._getDeliveryStatusCode());},_getOperationStatusIcon:function(){if(this._shouldShowWarningAndFlyout())return (o.createElement(l,{src:"/images/ads/audience_manager/error.png",className:"_55zn"}));return (o.createElement(o.DOM.span,null));},componentWillUnmount:function(){clearTimeout(this._lingerTimeout);},_onMouseEnter:function(){clearTimeout(this._lingerTimeout);if(this._shouldShowWarningAndFlyout())this.setState({showHelpDialog:true});},_onMouseLeave:function(){clearTimeout(this._lingerTimeout);this._lingerTimeout=setTimeout(this.setState.bind(this,{showHelpDialog:false}),j.HELP_DIALOG_LINGER_TS);},_shouldShowWarningAndFlyout:function(){return this._isAnomalousOperationStatus()||this._isAnomalousDeliveryStatus()||this._isAnomalousAudienceSize();},_getSubText:function(){if(this._isAnomalousDeliveryStatus())return ("Disabled");var x=this._getOperationStatusCode();if(this._isAnomalousOperationStatus()&&!h.useLastUpdateTime(x))return h.getProblemShortDesc(x);switch(x){case k.NO_STATUS:case k.NORMAL:if(this._isAnomalousAudienceSize())return ("Audience too small");return this._getLastUpdateTime();case k.UPDATING:return ("Updating audience");default:return this._getLastUpdateTime();}},_getLastUpdateTime:function(){if(!this.props.audience.time_content_updated)return;var x=new Date(this.props.audience.time_content_updated*1000),y=u(x,'m/d/Y');return (t._("Last updated {date}",[t.param("date",y)]));},_isAnomalousOperationStatus:function(){var x=this._getOperationStatusCode();return h.isWarning(x)||h.isError(x);},_isAnomalousDeliveryStatus:function(){return g.isError(this._getDeliveryStatusCode());},_isAnomalousAudienceSize:function(){return g.isInactive(this._getDeliveryStatusCode())&&h.isNormal(this._getOperationStatusCode());}});e.exports=w;},null);
__d("AdsAMAudienceStatusLegacyUtils",["fbt"],function(a,b,c,d,e,f,g){var h={READY:'ready',WAITING:'waiting'},i={};i[h.READY]="Ready";i[h.WAITING]="Waiting";var j=function(k){return i[k]?i[k]:'--';};e.exports={STATUSES:h,textByStatus:j};},null);
__d("AudienceManagerStatusColumnLegacyRenderer.react",["AdsAMAudienceStatusLegacyUtils","React","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.PropTypes,l=h.createClass({displayName:'AudienceManagerStatusColumnLegacyRenderer',propTypes:{status:k.string.isRequired,loading:k.bool},render:function(){return (h.createElement(h.DOM.div,null,h.createElement(i,{background:"light",size:"small",className:((!this.props.loading?"hidden_elem":''))}),h.createElement(h.DOM.div,{className:((this.props.loading?"hidden_elem":''))},this._getFormattedStatus())));},_getFormattedStatus:function(){return g.textByStatus(this.props.status);}});e.exports=l;},null);
__d("AudienceManagerTimeUpdatedCellRenderer",["React","cx","formatDate"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:'AudienceManagerTimeUpdatedCellRenderer',propTypes:{audience:j.object.isRequired},render:function(){var l=this.props.audience.time_updated,m=new Date(l*1000),n=i(m,'m/d/Y'),o=i(m,'g:ia');return (g.createElement(g.DOM.div,null,g.createElement(g.DOM.div,null,n),g.createElement(g.DOM.div,{className:"_5l7_"},o)));}});e.exports=k;},null);
__d("AudienceManagerTimeCreatedColumnRenderer.react",["React","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l=g.createClass({displayName:'AudienceManagerTimeCreatedColumnRenderer',propTypes:{timeCreated:k.number},render:function(){var m=this.props.timeCreated;if(!m)return (g.createElement(g.DOM.div,null,"Not Available"));var n=new Date(m*1000),o=j(n,'m/d/Y'),p=j(n,'g:ia');return (g.createElement(g.DOM.div,null,g.createElement(g.DOM.div,null,o),g.createElement(g.DOM.div,{className:"_3imx"},p)));}});e.exports=l;},null);
__d("AudienceManagerDebugAPIDataColumnCellRenderer.react",["React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIButton.react","List.react","Link.react","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=g.PropTypes;function t(v,w){if(typeof v!=='object')return v+"\n";w=w||0;var x='';for(var y in v){if(!v.hasOwnProperty(y))continue;x+=(new Array(w+1).join('  '))+y+': ';if(typeof v[y]==='object')x+="\n";x+=t(v[y],w+1);}return x;}var u=g.createClass({displayName:'AudienceManagerDebugAPIDataColumnCellRenderer',mixins:[h],propTypes:{audience:s.object.isRequired},getInitialState:function(){return {dialogShown:false};},render:function(){var v="API Data";return (g.createElement(n,{label:v,use:"default",size:"small",onClick:this._onAPIDataClick}));},renderLayers:function(){if(!this.state.dialogShown)return null;var v=this.props.audience,w=q('/intern/ads/eagle/audience_history').addQueryData({cluster_id:v.id}),x=q('/intern/id').addQueryData({id:v.id});return {dialog:g.createElement(i,{shown:this.state.dialogShown,width:500,onToggle:this._onCloseClick},g.createElement(m,null,"API Data"),g.createElement(j,null,g.createElement(g.DOM.pre,null,t(this.props.audience)),g.createElement(g.DOM.div,null,g.createElement(o,{direction:"horizontal",border:"none",spacing:"large"},g.createElement(g.DOM.li,null,g.createElement(p,{href:w,target:"_blank"},"History")),g.createElement(g.DOM.li,null,g.createElement(p,{href:x,target:"_blank"},"FBObj"))))),g.createElement(l,null,g.createElement(k,{use:"default",action:"close",onClick:this._onCloseClick})))};},_onAPIDataClick:function(){this.setState({dialogShown:true});},_onCloseClick:function(){this.setState({dialogShown:false});}});e.exports=u;},null);
__d("AudienceManagerDataTable.react",["AdsAudienceDeliveryStatusUtils","AdsAMDataSourceUtil","AudienceManagerAdvertiseColumnCellRenderer","AudienceManagerDataSourceColumnCellRenderer.react","AudienceManagerNameColumnCellRenderer","AudienceManagerStatusColumnRenderer.react","AudienceManagerStatusColumnLegacyRenderer.react","AudienceManagerTimeUpdatedCellRenderer","AudienceManagerTimeCreatedColumnRenderer.react","CurrentUser","React","Image.react","URI","XUIButton.react","XUISortableDataTable.react","XUIPagerButtons.react","adsGKCheck","cx","ix","fbt","AdsCFLoggerInternal","ads-lib-formatters","AudienceManagerDebugAPIDataColumnCellRenderer.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){var ca=q.PropTypes,da=ba.createIntlNumberFormatter(0),ea=function(ga){return h.textByType(ga.type);},fa=q.createClass({displayName:'AudienceManagerDataTable',propTypes:{account:ca.object.isRequired,audiences:ca.array.isRequired,dao:ca.object.isRequired,isFirstPage:ca.bool.isRequired,isLastPage:ca.bool.isRequired,onAudienceChanged:ca.func.isRequired,onPreviousButtonClicked:ca.func.isRequired,onNextButtonClicked:ca.func.isRequired},render:function(){var ga=[{id:'name',label:"Audience Name",comparator:function(ka,la){return (ka.audience.name.toLowerCase()>la.audience.name.toLowerCase()?1:-1);},cellRenderer:function(ka){return (q.createElement(k,{accountID:this.props.account.account_id,audience:ka,dao:this.props.dao,onAudienceChanged:this.props.onAudienceChanged}));}.bind(this),sortable:true},{id:'data_source',label:"Source",width:150,comparator:function(ka,la){return (ea(ka.audience.data_source).toLowerCase()>ea(la.audience.data_source).toLowerCase()?1:-1);},cellRenderer:function(ka){return (q.createElement(j,{audience:ka}));}.bind(this),sortable:true},{id:'size',label:"People",width:80,sortable:true,isNumeric:true,comparator:function(ka,la){var ma=ka.size.approximate_count||0,na=la.size.approximate_count||0;return ma-na;},cellRenderer:function(ka){var la=ka.approximate_count||0;return g.isActive(ka.delivery_status.code)?da(la):'--';}}];if(w('ads_manager_new_status_col'))ga.push({id:'time_created',label:"Time Created",width:80,comparator:function(ka,la){return la.audience.time_created-ka.audience.time_created;},cellRenderer:function(ka){return (q.createElement(o,{timeCreated:ka.time_created}));},sortable:true,isNumeric:true});ga.push({id:'status',label:"Availability",width:125,cellRenderer:function(ka){if(w('ads_manager_new_status_col'))return (q.createElement(l,{accountID:this.props.account.account_id,audience:ka}));return (q.createElement(m,{status:g.isError(ka.delivery_status.code)?'--':ka.status}));}.bind(this)});if(!w('ads_manager_new_status_col'))ga.push({id:'time_updated',label:"Last Updated",width:80,comparator:function(ka,la){return la.audience.time_updated-ka.audience.time_updated;},cellRenderer:function(ka){return (q.createElement(n,{audience:ka}));},sortable:true,isNumeric:true});ga.push({id:'advertise',label:"Advertise",width:100,cellRenderer:function(ka){return (q.createElement(i,{audience:ka,onCreateAdClick:this._onCreateAdClick}));}.bind(this)});if(p.isEmployee()){var ha=b('AudienceManagerDebugAPIDataColumnCellRenderer.react');ga.push({id:'debug',label:"Debug (FB Only)",width:100,cellRenderer:function(ka){return (q.createElement(ha,{audience:ka}));}});}var ia=this.props.audiences.map(function(ka){var la={audience:ka,name:ka,data_source:ka,size:ka,status:ka,advertise:ka};if(w('ads_manager_new_status_col')){la.time_created=ka;}else la.time_updated=ka;if(p.isEmployee())la.debug=ka;return la;}),ja=null;if(!this.props.isFirstPage||!this.props.isLastPage)ja=(q.createElement(v,{className:"_5v30"},q.createElement(t,{disabled:this.props.isFirstPage,href:{url:'#'},image:q.createElement(r,{src:y('/images/ui/x/pager/left.png')}),role:"button",onClick:this.props.onPreviousButtonClicked}),q.createElement(t,{disabled:this.props.isLastPage,href:{url:'#'},image:q.createElement(r,{src:y('/images/ui/x/pager/right.png')}),role:"button",onClick:this.props.onNextButtonClicked})));return (q.createElement(q.DOM.div,{className:"_5pvk"},q.createElement(u,{rows:ia,columns:ga,outerBorder:true,columnToSortBy:w('ads_manager_new_status_col')?"time_created":"time_updated"}),ja));},_onCreateAdClick:function(ga){aa.log(aa.CATEGORIES.NO_DB_OP,'click_am_create_ad_button',{audience_id:ga.id});var ha={custom_audiences:[{id:ga.id,name:ga.name}]},ia=s('/ads/create').addQueryData({act:this.props.account.account_id,targeting_spec:JSON.stringify(ha)});window.open(ia.toString(),'_blank');}});e.exports=fa;},null);
__d("AudienceManagerWorkflowTypes",[],function(a,b,c,d,e,f){e.exports={DATA_FILE:'datafile',MAIL_CHIMP:'mailchimp',COPY_PASTE:'copypaste',MACA:'maca',WCA:'wca',PIXEL_DETAILS:'pixel',LOOKALIKE:'lal'};},null);
__d("AudienceManager.react",["AdInterfacesUiLogger","AdsAccountUtils","AdsAMViewActions","AdsCreateAudienceActionSelector.react","AudienceManagerBlankState.react","AudienceManagerCreateAudienceDialog.react","AudienceManagerDeleteDialog.react","AdsAudienceManagerNUXController","AudienceManagerNuxTypes","AudienceManagerEditDialog.react","AudienceManagerShareDialog.react","AudienceManagerLoggingEvents","AudienceManagerLookalikeDialog.react","AudienceManagerViewPixelDialog.react","AudienceManagerWebsiteUsers.react","AudienceManagerTransactionDialog.react","AudienceManagerDataTable.react","AudienceManagerWorkflowTypes","AudienceManagerUIConstants","CustomAudienceTosUtils","React","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=y.CREATE_AUDIENCE_ACTION_TYPE,ea=aa.PropTypes,fa=aa.createClass({displayName:'AudienceManager',propTypes:{account:ea.object.isRequired,audiences:ea.array.isRequired,dao:ea.object.isRequired,dialogStates:ea.object.isRequired,error:ea.object,isFirstPage:ea.bool.isRequired,isLastPage:ea.bool.isRequired,stage:ea.number.isRequired,onAudienceAdded:ea.func.isRequired,onAudienceDeleted:ea.func.isRequired,onAudienceChanged:ea.func.isRequired,onUpdateAudienceCapabilities:ea.func.isRequired,onPreviousButtonClicked:ea.func.isRequired,onNextButtonClicked:ea.func.isRequired,onCancelError:ea.func.isRequired,autoLaunch:ea.object,audienceClicked:ea.object,canWrite:ea.bool},getInitialState:function(){return {useAutoLaunch:true,showCreateAudienceDialog:false};},render:function(){n.displayIfNotSeen(o.WEBSITE_CUSTOM_AUDIENCE);var ga=this.props.audiences&&this.props.audiences.length;return (aa.createElement(aa.DOM.div,null,ga?this.renderNonBlankState():this.renderBlankState(),this._renderWCADialog()));},renderBlankState:function(){return (aa.createElement(aa.DOM.div,{className:"_2bhs"},aa.createElement(k,{accountId:this.props.account.account_id,dao:this.props.dao,showLookalikeDialog:this.props.dialogStates.showLookalikeDialog,onAudienceAdded:this.props.onAudienceAdded,tosAccepted:this.props.account.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements(),autoLaunch:this.state.useAutoLaunch?this.props.autoLaunch:null,canWrite:this.props.canWrite})));},renderNonBlankState:function(){return (aa.createElement(aa.DOM.div,{className:"_4--y"},aa.createElement(v,{stage:this.props.stage,error:this.props.error,onCancelError:this.props.onCancelError}),aa.createElement(aa.DOM.div,{className:"_393y _1ufr"},aa.createElement(j,{onAction:this._onCreateAudienceAction,disabled:!this.props.canWrite})),aa.createElement(l,{dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,showDialog:this.state.showCreateAudienceDialog,onCancel:this._onCreateAudienceDialogCancel,accountId:this.props.account.account_id,tosAccepted:this.props.account.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements(),autoLaunch:this.state.useAutoLaunch?this.props.autoLaunch:null}),this._renderViewPixelDialog(),this._renderRegularEditDialog(),this._renderDeleteAudienceDialog(),this._renderShareAudienceDialog(),this._renderLookalikeDialog(),this._renderTable()));},_renderWCADialog:function(){var ga=this.props.audienceClicked?false:true;if(this.props.dialogStates.showWCADialog)return (aa.createElement(u,{accountID:this.props.account.account_id,audience:this.props.audienceClicked,dao:this.props.dao,createMode:ga,onAudienceAdded:this.props.onAudienceAdded,onAudienceChanged:this.props.onAudienceChanged,tosAccepted:this.props.account.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements()}));},_onCreateAudienceDialogCancel:function(){this.setState({showCreateAudienceDialog:false});},_onLookalikeAudienceAdded:function(ga){this.props.onAudienceAdded(ga);},_onCreateAudienceAction:function(ga){switch(ga){case da.CUSTOM_AUDIENCE:g.log(r.AM_CA_CREATE_AUDIENCE_CLICK);this.setState({showCreateAudienceDialog:true,useAutoLaunch:false});break;case da.LOOKALIKE:g.log(r.AM_LAL_CREATE_AUDIENCE_CLICK);i.showLookalikeDialog(null);break;default:ca(false);}},_renderLookalikeDialog:function(){if(this.props.dialogStates.showLookalikeDialog)return (aa.createElement(s,{accountID:this.props.account.account_id,audience:this.props.audienceClicked,dao:this.props.dao,onAudienceAdded:this._onLookalikeAudienceAdded}));},_renderViewPixelDialog:function(){if(this.props.dialogStates.showPixelDialog)return (aa.createElement(t,{accountID:this.props.account.account_id,dao:this.props.dao}));},_renderShareAudienceDialog:function(){if(this.props.dialogStates.showShareDialog&&this.props.audienceClicked)return (aa.createElement(q,{audience:this.props.audienceClicked,onUpdateAudienceCapabilities:this.props.onUpdateAudienceCapabilities,dao:this.props.dao}));},_renderRegularEditDialog:function(){if(this.props.dialogStates.showRegularEditDialog&&this.props.audienceClicked)return (aa.createElement(p,{accountID:this.props.account.account_id,audience:this.props.audienceClicked,onAudienceChanged:this.props.onAudienceChanged,dao:this.props.dao,onClose:i.closeRegularEditDialog}));},_renderDeleteAudienceDialog:function(){if(this.props.dialogStates.showDeleteDialog&&this.props.audienceClicked)return (aa.createElement(m,{audience:this.props.audienceClicked,dao:this.props.dao,onAudienceDeleted:this.props.onAudienceDeleted}));},_renderTable:function(){return (aa.createElement(w,{account:this.props.account,audiences:this.props.audiences,dao:this.props.dao,isFirstPage:this.props.isFirstPage,isLastPage:this.props.isLastPage,onAudienceChanged:this.props.onAudienceChanged,onPreviousButtonClicked:this.props.onPreviousButtonClicked,onNextButtonClicked:this.props.onNextButtonClicked}));},_getTosRequirements:function(){var ga=this.props.account.capabilities,ha=h.getIsCorporateFromCapabilities(ga);return z.getTosRequirements(ha);},componentDidMount:function(){if(this.state.useAutoLaunch&&this.props.autoLaunch)switch(this.props.autoLaunch.workflow_id){case x.WCA:setTimeout(function(){return i.showWCADialog();});break;case x.PIXEL_DETAILS:setTimeout(function(){return i.showPixelDialog();});break;case x.LOOKALIKE:setTimeout(function(){return i.showLookalikeDialog();});break;}}});e.exports=fa;},null);
__d("AudienceManagerErrorView.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:'AudienceManagerErrorView',propTypes:{shown:j.bool,message:j.string},render:function(){return (g.createElement(g.DOM.div,{className:((!this.props.shown?"hidden_elem":''))},g.createElement(h,{use:"warn"},this.props.message)));}});e.exports=k;},null);
__d("AudienceManagerErrorTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({ACCOUNT_INIT:null,AUDIENCE_INIT:null,AUDIENCE_DELETE:null,AUDIENCE_ADD:null,AUDIENCE_UPDATE:null,AUDIENCE_GET:null,CAPABILITY_REMOVE:null,CAPABILITY_UPDATE:null}),i=g({INIT_ERRORS:null,NON_INIT_ERRORS:null}),j={};j[i.INIT_ERRORS]=[h.ACCOUNT_INIT,h.AUDIENCE_INIT];j[i.NON_INIT_ERRORS]=[h.AUDIENCE_DELETE,h.AUDIENCE_UPDATE,h.AUIDENCE_ADD,h.AUIDENCE_GET,h.CAPABILITY_REMOVE,h.CAPABILITY_UPDATE];e.exports={Errors:h,ErrorTypes:i,ErrorTypeToErrors:j};},null);
__d("AudiencePropertyConstants",[],function(a,b,c,d,e,f){e.exports={ACCOUNT_ID:'account_id',APPROXIMATE_COUNT:'approximate_count',DATA_SOURCE:'data_source',DESCRIPTION:'description',ID:'id',NAME:'name',PARENT_AUDIENCE_ID:'parent_audience_id',PARENT_CATEGORY:'parent_category',RETENTION_DAYS:'retention_days',RULE:'rule',STATUS:'status',DELIVERY_STATUS:'delivery_status',OPERATION_STATUS:'operation_status',PERMISSION_FOR_ACTIONS:'permission_for_actions',SUBTYPE:'subtype',SUBTYPE_NAME:'subtype_name',TIME_CONTENT_UPDATED:'time_content_updated',TIME_CREATED:'time_created',TIME_UPDATED:'time_updated',TYPE:'type',TYPE_NAME:'type_name',INCLUDED_CUSTOM_AUDIENCES:'included_custom_audiences',EXCLUDED_CUSTOM_AUDIENCES:'excluded_custom_audiences',LOOKALIKE_SPEC:'lookalike_spec'};},null);
__d("FixedDataTableSortFunctions",[],function(a,b,c,d,e,f){function g(j,k){if(j>k)return 1;if(j<k)return -1;return 0;}function h(j,k){if(j!==null&&j!==undefined&&k!==null&&k!==undefined)return null;j=(j===null||j===undefined)?1:0;k=(k===null||k===undefined)?1:0;return j-k;}var i={compareNumber:function(j,k){var l=h(j,k);if(l===null)l=parseFloat(j)-parseFloat(k);return l;},compareString:function(j,k){var l=h(j,k);if(l===null)l=g(j,k);return l;},compareMixedNumberString:function(j,k){var l=h(j,k);if(l===null){var m=typeof(j),n=typeof(k);l=g(m,n)||g(j,k);}return l;},compareDate:function(j,k){var l=h(j,k);if(l===null)l=j.getTime()-k.getTime();return l;}};e.exports=i;},null);
__d("AdsAMAudienceStore",["AdsAMActionTypes","AdsAMDispatcher","Arbiter","AudienceManagerUIConstants","AudiencePropertyConstants","FixedDataTableSortFunctions","ImmutableObject","copyProperties","invariant","merge","whitelistObjectKeys","AudienceManagerErrorTypes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=b('AudienceManagerErrorTypes').ErrorTypeToErrors,s=j.SORT_ORDER,t,u,v,w,x,y,z,aa,ba,ca={};function da(){t=false;w={};x={};y={};z={};aa={};ba={sortOrder:s.DESC,sortKey:k.TIME_CREATED,compareFunction:l.compareNumber};}function ea(){u=false;v={};}da();ea();function fa(ka){(ka||[]).forEach(function(la){w[la.id]=q(la,ia);});}function ga(ka,la){w[ka]=p(w[ka],la);}function ha(ka,la){var ma=ba.compareFunction(ka[ba.sortKey],la[ba.sortKey]);return ba.sortOrder===s.ASC?ma:-ma;}var ia=[k.ACCOUNT_ID,k.APPROXIMATE_COUNT,k.DATA_SOURCE,k.DESCRIPTION,k.ID,k.NAME,k.PARENT_AUDIENCE_ID,k.PARENT_CATEGORY,k.RETENTION_DAYS,k.RULE,k.STATUS,k.DELIVERY_STATUS,k.OPERATION_STATUS,k.PERMISSION_FOR_ACTIONS,k.SUBTYPE,k.SUBTYPE_NAME,k.TIME_CONTENT_UPDATED,k.TIME_CREATED,k.TIME_UPDATED,k.TYPE,k.TYPE_NAME,k.INCLUDED_CUSTOM_AUDIENCES,k.EXCLUDED_CUSTOM_AUDIENCES,k.LOOKALIKE_SPEC],ja=n(new i(),{getState:function(ka){var la=w[ka];o(la);return new m(la);},getAllAudiences:function(){var ka=[];for(var la in w)ka.push(new m(w[la]));ka.sort(ha);return ka;},hasAllContent:function(){return t&&u;},getAllAudiencesMap:function(){var ka={};for(var la in w)ka[la]=(new m(w[la]));return ka;},getErrorsByType:function(ka){var la=[],ma=r[ka]||[];for(var na=0;na<ma.length;na++)if(ca[ma[na]])la.push(ca[ma[na]]);return la;},getAccount:function(){return new m(v);},getSortState:function(){return ba;},hasAudienceDetailsContent:function(ka){return !!w[ka];},getAudienceStatus:function(ka){return x[ka];},getAudienceUsageHistory:function(ka){return y[ka];},getAudienceAccountIDs:function(ka){return z[ka];},getAudiencePixel:function(ka){return aa[ka];},dispatchToken:h.register(function(ka){var la=ka.action,ma=false;switch(la.actionType){case g.ACCOUNT_INIT:ea();v=la.account;u=true;ma=true;break;case g.AUDIENCE_INIT:da();fa(la.audiences);t=true;ma=true;break;case g.AUDIENCE_ADD:var na=la.audience;w[na.id]=q(na,ia);ma=true;break;case g.AUDIENCE_APPEND:fa(la.audiences);ma=true;break;case g.AUDIENCE_DELETE:delete w[la.audience.id];ma=true;break;case g.AUDIENCE_BULK_DELETE:la.audiences.forEach(function(pa){delete w[pa.id];});ma=true;break;case g.AUDIENCE_CHANGE:ga(la.audience.id,la.changedProperties);ma=true;break;case g.AUDIENCE_DETAILS_AUDIENCE_INITIALIZE:var oa=la.audience.id;w[oa]=la.audience;ma=true;break;case g.AUDIENCE_DETAILS_UPDATE_USAGE:y[la.audienceID]=la.audienceUsageHistory;break;case g.AUDIENCE_DETAILS_UPDATE_STATUS:x[la.audienceID]=la.audienceStatuses;break;case g.AUDIENCE_DETAILS_UPDATE_ACCOUNTS:z[la.audienceID]=la.accountIDs;break;case g.AUDIENCE_DETAILS_UPDATE_PIXEL:aa[la.audienceID]=la.pixel;break;case g.AUDIENCE_SORT:ba.sortOrder=la.sortOrder;ba.sortKey=la.sortKey;ba.compareFunction=la.compareFunction;ma=true;break;case g.ERROR:ca[la.error]=la.rawData.error;ma=true;break;case g.VIEW_CLEAR_ERRORS:ca={};ma=true;break;}if(ma)ja.inform('change');})});e.exports=ja;},null);
__d("AudienceManagerControllerReact",["AdInterfacesAppNames","AdInterfacesUiLogger","AdsAMAudienceActions","AdsAMAudienceStore","AdsAMViewStore","AdsAPISpec","AdsCFLoggerInternal","AdsUtils","Arbiter","AudienceManager.react","AudienceManagerErrorView.react","AudienceManagerStages","CurrentLocale","DialogPosition","AdsDaoGraph","React","fbt","AdsDao"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=b('AdsDao').DataPlan,y="am:audience_api_error",z="am:audience_api_success",aa="am:audience_before_api",ba="am:audience_cancel_error",ca=l.CUSTOM_AUDIENCE_FIELDS.map(n.underscoreKey),da=92,ea=50,fa={after:'after',before:'before'},ga=function(){o.inform(aa);},ha=function(){o.inform(ba);},ia=function(){o.inform(z);},ja=function(na){o.inform(y,na);},ka=function(na,oa){var pa=(oa&&oa.paging)||{},qa=pa.cursors||{};na.before=pa.previous?qa.before:null;na.after=pa.next?qa.after:null;},la=function(na,oa,pa,qa){var ra={after:qa===fa.after?pa.after:null,before:qa===fa.before?pa.before:null,fields:ca,limit:ea};ga();na.fetch.customAudiencesForAccount.one(function(sa){ka(pa,sa);i.initializeAudiences(sa.data);oa.setProps({audiences:j.getAllAudiences(),isFirstPage:pa.before===null,isLastPage:pa.after===null});ia();},ra);},ma=function(na,oa){this.initialize=function(){t.setFixedTopMargin(da);var pa=''+(oa.act||oa.accountId);m.setDefaultData({account_id:pa});h.setAccountID(pa);h.setAppName(g.AUDIENCE_MANAGER);var qa=u.primedForAccount(pa).primedForLocale(s.get()),ra={account:{command:qa.fetch.accountInfo}};x.execute(x.create(ra),this._loadAudiences.bind(this,qa));};this._loadAudiences=function(pa,qa,ra){pa.fetch.customAudiencesForAccount.one(this._onAudienceLoaded.bind(this,pa,qa),{fields:ca,limit:ea,handleError:function(){var sa=v.createElement(q,{shown:true,message:"Error: Failed to load audiences for this ad account."});sa=v.renderComponent(sa,na);}});};this._onAudienceLoaded=function(pa,qa,ra){var sa={before:null,after:null},ta=ra.data;ka(sa,ra);i.initializeAudiences(ta);var ua=v.createElement(p,{account:qa.account,audiences:j.getAllAudiences(),dao:pa,dialogStates:k.getViewState(),isFirstPage:sa.before===null,isLastPage:sa.after===null,stage:r.IDLE,onPreviousButtonClicked:function(){la(pa,ua,sa,fa.before);},onNextButtonClicked:function(){la(pa,ua,sa,fa.after);},onAudienceAdded:function(va){pa.fetch.audience.one(function(wa){m.log(m.CATEGORIES.NO_DB_OP,'ab_am_create_audience_success',wa);i.addAudience(wa);ia();},{audienceID:va,fields:ca,handleError:function(wa,xa){ja(xa.error);}});},onAudienceDeleted:function(va){ga();pa.remove.audience.one(function(wa){if(wa){i.deleteAudience(va);ia();}},{audienceId:va.id,force_delete_lookalikes:true,handleError:function(wa,xa){ja(xa.error);}});},onAudienceChanged:function(va,wa){ga();var xa={id:va.id,handleError:function(ya,za){ja(za.error);},name:wa.name,description:wa.description,rule:wa.rule,retention_days:wa.retention_days};if(wa.inclusions)xa.inclusions=wa.inclusions;if(wa.exclusions)xa.exclusions=wa.exclusions;pa.mutate.customAudience.one(function(ya){if(ya)pa.fetch.audience.one(function(za){i.updateAudience(va,za);ia();},{audienceID:va.id,fields:ca,handleError:function(za,ab){ja(ab.error);}});},xa);},onUpdateAudienceCapabilities:function(va,wa,xa){ga();pa.remove.removeAudienceCapabilities.one(function(ya){if(ya)pa.mutate.updateCapabilitiesForAudience.one(function(za){ia();},{audienceID:va,accounts_capabilities:wa,handleError:function(za,ab){ja(ab.error);}});},{audienceID:va,adaccounts:xa,handleError:function(ya,za){ja(za.error);}});},onCancelError:ha,autoLaunch:oa.autoLaunch,canWrite:oa.canWrite});ua=v.renderComponent(ua,na);o.subscribe(y,function(va,wa){ua.setProps({error:wa,stage:r.ERROR});});o.subscribe(z,function(){ua.setProps({stage:r.IDLE});});o.subscribe(aa,function(){pa.fetch.audience.clearCache();ua.setProps({error:null,stage:r.PROCESSING});});o.subscribe(ba,function(){ua.setProps({error:null,stage:r.IDLE});});j.subscribe('change',function(){var va=k.getAudienceIdClicked();if(va){ua.setProps({audienceClicked:j.getState(va),audiences:j.getAllAudiences()});}else ua.setProps({audiences:j.getAllAudiences()});});k.subscribe('change',function(){var va=k.getAudienceIdClicked();if(va){ua.setProps({audienceClicked:j.getState(va),dialogStates:k.getViewState()});}else ua.setProps({audienceClicked:null,dialogStates:k.getViewState()});});};};e.exports=ma;},null);